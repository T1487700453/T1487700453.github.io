<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>JSP总结</title>
      <link href="2020/11/11/qian-duan-ye-mian/jsp-zong-jie/"/>
      <url>2020/11/11/qian-duan-ye-mian/jsp-zong-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="1-jsp是什么"><a href="#1-jsp是什么" class="headerlink" title="1.jsp是什么"></a>1.jsp是什么</h2><pre class=" language-java"><code class="language-java">jsp的全称    Java Server Pages        是一种动态网页开发技术    ​jsp servlet php asp 等属于动态网页技术    ​jsp页面是以 <span class="token punctuation">.</span>jsp 结尾的文件    ​<span class="token punctuation">.</span>html 文件是静态页面    ​<span class="token punctuation">.</span>jsp  文件是动态页面    ​jsp页面允许我们在HTML代码中嵌入java代码，这样我们就可以在HTML中使用java代码来完成的功      能了    ​简单的理解，jsp就是就是HTML页面 <span class="token operator">+</span> java代码    ​但是jsp中能写的内容还不止这些，可以包含如下内容：        ​HTML标签        ​css        ​javascript        ​java代码        ​EL表达式        ​引入并使用其他标签库            例：jst1标签库、struts2标签库、spring框架标签库 等    ​所以jsp页面里面除了能写之前在HTML里面写东西之外，还可以写很多和java相关的对象，java代        码、EL表达式、动态标签库等（这些对象的本质都是执行java代码）</code></pre><blockquote><p>【注意】jsp页面中可以只有java代码，也可以一句java代码也没有</p></blockquote><h2 id="2-jsp的运行"><a href="#2-jsp的运行" class="headerlink" title="2.jsp的运行"></a>2.jsp的运行</h2><pre class=" language-java"><code class="language-java">    ​浏览器可以直接运行HTML页面，但是不能直接运行jsp页面，jsp是需要在web容器中运行（拥有jsp引擎，Jasper<span class="token punctuation">.</span>jar）        例：    tomcat服务器    ​所以jsp是运行在服务端的，运行完之后，把动态生成的HTML页面再使用io流写回给浏览器，浏览器接收并且解析后再呈现出来效果</code></pre><h2 id="3-jsp和servlet的关系"><a href="#3-jsp和servlet的关系" class="headerlink" title="3.jsp和servlet的关系"></a>3.jsp和servlet的关系</h2><pre class=" language-java"><code class="language-java">    ​简单的讲，一个jsp页面就是一个servlet    ​jsp页面第一次被访问的时候，会被tomcat服务器编译成一个java类，这个java默认继承HTTPJSPBase类，而HTTPJSPBase类是HttpServlet的子类    ​我们编写的jsp页面最终就被tomcat服务器编译成了一个HttpServlet的子类，所以说jsp本身就是一个servlet，那么jsp为什么是需要运行在tomcat服务器中原因也就很好理解了    ​jsp页面被tomcat服务器编译成的java文件及其<span class="token keyword">class</span>文件保存在tomcat服务器里面的work目录中，在这里的代码中，我们还可以看见它是如何使用io流把生成的HTML页面代码一行一行写回给浏览器的</code></pre><h3 id="work"><a href="#work" class="headerlink" title="work"></a>work</h3><pre class=" language-java"><code class="language-java">    tomcat中lib目录中的 Jasper<span class="token punctuation">.</span>jar 相关API里面封装了一些操作，可以把jsp页面编译为java文件以及<span class="token keyword">class</span>文件    例：    ​桌面上手动有一个web项目：web<span class="token operator">-</span>test    ​项目中有一个jsp页面：hello<span class="token punctuation">.</span>jsp    ​运行下面java代码把web项目中的jsp页面编译成java文件和<span class="token keyword">class</span>文件    【注意】web项目的基本结构    运行环境    ​如果是在web项目运行下面代码，需要额外加入两个jar包：（web项目中已经有了tomcat中的lib    里面的jar了）        ant<span class="token operator">-</span><span class="token number">1.10</span><span class="token punctuation">.</span><span class="token number">6</span><span class="token punctuation">.</span>jar        tomcat<span class="token operator">-</span>juli<span class="token operator">-</span><span class="token number">8.5</span><span class="token punctuation">.</span><span class="token number">38</span><span class="token punctuation">.</span>jar    ​如果是在java项目中运行下面代码，至少需要加入以下jar包：        tomcat<span class="token operator">-</span>juli<span class="token operator">-</span><span class="token number">8.5</span><span class="token punctuation">.</span><span class="token number">38</span><span class="token punctuation">.</span>jar        ant<span class="token operator">-</span><span class="token number">1.10</span><span class="token punctuation">.</span><span class="token number">6</span><span class="token punctuation">.</span>jar        jasper<span class="token punctuation">.</span>jar        servlet<span class="token operator">-</span>api<span class="token punctuation">.</span>jar        tomcat<span class="token operator">-</span>api<span class="token punctuation">.</span>jar        tomcat<span class="token operator">-</span>util<span class="token punctuation">.</span>jar        jsp<span class="token operator">-</span>api<span class="token punctuation">.</span>jar        el<span class="token operator">-</span>api<span class="token punctuation">.</span>jar        ecj<span class="token operator">-</span><span class="token number">4.6</span><span class="token punctuation">.</span><span class="token number">3</span><span class="token punctuation">.</span>jar    示例：    <span class="token keyword">package</span> com<span class="token punctuation">.</span>briup<span class="token punctuation">.</span>test<span class="token punctuation">;</span>    <span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>jasper<span class="token punctuation">.</span>JspC<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestCompiler</span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jspcTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>              <span class="token keyword">try</span> <span class="token punctuation">{</span>                  JspC jspc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JspC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment" spellcheck="true">//web应用的root目录  </span>                jspc<span class="token punctuation">.</span><span class="token function">setUriroot</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\ASUS\\Desktop\\web-test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//.java文件和.class文件的输出目录  </span>                jspc<span class="token punctuation">.</span><span class="token function">setOutputDir</span><span class="token punctuation">(</span><span class="token string">"C:\\Users\\ASUS\\Desktop\\web-test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//要编译的jsp</span>                jspc<span class="token punctuation">.</span><span class="token function">setJspFiles</span><span class="token punctuation">(</span><span class="token string">"hello.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment" spellcheck="true">//false或不指定的话只生成.java文件  </span>                jspc<span class="token punctuation">.</span><span class="token function">setCompile</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                jspc<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span><span class="token punctuation">{</span>                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>              TestCompiler t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestCompiler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              t<span class="token punctuation">.</span><span class="token function">jspcTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span></code></pre><h2 id="4-jsp的生命周期"><a href="#4-jsp的生命周期" class="headerlink" title="4.jsp的生命周期"></a>4.jsp的生命周期</h2><h3 id="1）编译阶段"><a href="#1）编译阶段" class="headerlink" title="1）编译阶段"></a>1）编译阶段</h3><pre class=" language-java"><code class="language-java">    客户端第一次访问jsp的时候，服务器会把这个jsp页面翻译成对应的java文件，然后把java文件编译成对应的<span class="token keyword">class</span>文件    hello<span class="token punctuation">.</span>jsp  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">></span>  hello_jsp<span class="token punctuation">.</span>java  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">></span>  hello_jsp<span class="token punctuation">.</span><span class="token keyword">class</span>    观察这个java文件的内容可知，这就是一个servlet</code></pre><h3 id="2）初始化阶段"><a href="#2）初始化阶段" class="headerlink" title="2）初始化阶段"></a>2）初始化阶段</h3><pre class=" language-java"><code class="language-java">    ​客户端第一次访问jsp页面，在服务器把jsp翻译成java文件并编译<span class="token keyword">class</span>文件后，服务器会加载这个<span class="token keyword">class</span>文件内容，并且创建出此servlet对象（因此jsp就是一个servlet），然后调用这个servlet对象中的init方法进行初始化    ​如果我们想给jsp进行自定义的初始化内容，只要在【jsp声明】中重写 <span class="token function">jspInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法即可。    ​【注意】不要重写 <span class="token function">_jspInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>因为jsp编译成java类的时候，会自动重写这个方法，观察编译后的java代码就可以知道     例：        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">!</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jspInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我的jsp自定义初始化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token operator">%</span><span class="token operator">></span></code></pre><h3 id="3）执行阶段"><a href="#3）执行阶段" class="headerlink" title="3）执行阶段"></a>3）执行阶段</h3><pre class=" language-java"><code class="language-java">    ​客户端访问jsp页面的时候，服务器会调用其对应的servlet对象中的一个指定方法 <span class="token function">_jspService</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span>    ​就是在这个 <span class="token function">_jspService</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span>方法中使用io流，把动态生成的HTML一行一行写给了浏览器    ​【注意】本来是调用servlet对象中的service方法的，但是在HTTPJSPBase中重写的service方法中又调用了这个 <span class="token function">_jspService</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span> 方法</code></pre><h3 id="4）销毁阶段"><a href="#4）销毁阶段" class="headerlink" title="4）销毁阶段"></a>4）销毁阶段</h3><pre class=" language-java"><code class="language-java">    ​当服务器正关闭的时候，jsp对应的servlet对象会被销毁，并且调用servlet中的destroy方法    ​如果我们在jsp对应的servlet对象销毁时完成一些工作，只要在jsp声明中重写 <span class="token function">jspDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     方法即可       例：        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">!</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">jspDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"我的jsp进行销毁"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token operator">%</span><span class="token operator">></span></code></pre><h3 id="客户端访问jsp页面的特点"><a href="#客户端访问jsp页面的特点" class="headerlink" title="客户端访问jsp页面的特点"></a>客户端访问jsp页面的特点</h3><pre class=" language-java"><code class="language-java">    通过上述jsp的生命周期可知，写完一个jsp项目之后，第一次部署运行的时候，整个项目的运行速度会慢一些，因为第一次访问运行jsp的时候，需要先翻译成 <span class="token punctuation">.</span>java 文件然后再翻译成 <span class="token punctuation">.</span><span class="token keyword">class</span>文件 ，最后再运行，这个过程会耗费一些时间，但是第二次访问运行的时候就会比较快了</code></pre><h2 id="5-jsp页面中嵌入java代码"><a href="#5-jsp页面中嵌入java代码" class="headerlink" title="5.jsp页面中嵌入java代码"></a>5.jsp页面中嵌入java代码</h2><pre class=" language-java"><code class="language-java">jsp的脚本元素    jsp的指令元素    jsp的动作元素</code></pre><h3 id="1）jsp的脚本元素（直接嵌入java代码）"><a href="#1）jsp的脚本元素（直接嵌入java代码）" class="headerlink" title="1）jsp的脚本元素（直接嵌入java代码）"></a>1）jsp的脚本元素（直接嵌入java代码）</h3><h4 id="第一种：表达式（expression）"><a href="#第一种：表达式（expression）" class="headerlink" title="第一种：表达式（expression）"></a>第一种：表达式（expression）</h4><pre class=" language-java"><code class="language-java">形式：        <span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">%</span><span class="token operator">></span>例：        <span class="token operator">&lt;</span><span class="token operator">%=</span><span class="token string">"hello"</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%=</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span> <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%=</span>s<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>    ​将来翻译到java文件中的位置        _jspService 方法中的 out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> 里面的参数    ​例如上面的三个例子会翻译成        out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ​所以 System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span>这个方法的参数可以写什么，那么我们这个jsp页面中的表达式里面就可以写什么</code></pre><h4 id="第二种：脚本（scripttlet"><a href="#第二种：脚本（scripttlet" class="headerlink" title="第二种：脚本（scripttlet)"></a>第二种：脚本（scripttlet)</h4><pre class=" language-java"><code class="language-java">形式：        <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">%</span><span class="token operator">></span>          或          <span class="token operator">&lt;</span><span class="token operator">%</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>          <span class="token operator">%</span><span class="token operator">></span>   例：    <span class="token operator">&lt;</span><span class="token operator">%</span>        Student s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        String name <span class="token operator">=</span> <span class="token string">"tom"</span><span class="token punctuation">;</span>        String username <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">%</span><span class="token operator">></span>   将来翻译到java文件中的位置        ​脚本中的代码将来会被直接翻译到 _jspService 这个方法中        ​在一个普通的方法中我们可以写什么样的代码，那么在脚本中就可以写什么样的代码        ​【注意】脚本中所写的代码，代码的最后是要加上 <span class="token punctuation">;</span> 分号的，因为我们在一个方法里面所写的         每一句代码后面都要加 <span class="token punctuation">;</span> 分号        ​在脚本声明的变量，我们是可以在表达式里面使用的，但是要注意要先声明在使用变量。         只要查看脚本和表达式方别翻译到java文件中的位置，就可以很清楚的认识到这点</code></pre><h4 id="第三种：声明（declaration）"><a href="#第三种：声明（declaration）" class="headerlink" title="第三种：声明（declaration）"></a>第三种：声明（declaration）</h4><pre class=" language-java"><code class="language-java">形式：        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">!</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>          <span class="token operator">%</span><span class="token operator">></span>    例：        <span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">!</span>            <span class="token keyword">private</span> String name<span class="token punctuation">;</span>            <span class="token keyword">public</span> String <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello word"</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token string">"this is go()"</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token operator">%</span><span class="token operator">></span>    将来翻译到java文件中的位置：        ​直接将声明中的代码翻译到java文件里面所定义的类中        ​所以我们直接可以在一个类中写什么，就可以在声明中写什么            一般在声明中去定义一些类中的成员变量或者方法   【注意】这里面的代码，定义变量的时候要加 <span class="token punctuation">;</span> 分号<span class="token punctuation">,</span>                     定义方法的时候不用加 <span class="token punctuation">;</span> 分号，          这是和我们写一个java类语法是一样的</code></pre><h3 id="2）jsp的指令元素"><a href="#2）jsp的指令元素" class="headerlink" title="2）jsp的指令元素"></a>2）jsp的指令元素</h3><pre class=" language-java"><code class="language-java">    jsp的指令是给jsp引擎看的，让jsp引擎在翻译jsp页面成java文件的时候，知道需要注意哪些地方的设置    例：        ​页面中的编码        ​页面中脚本里面所用的编程语言        ​翻译的java文件中需要引入哪些其他包下的java类 等<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    写法：        <span class="token operator">&lt;</span><span class="token operator">%</span>@指令名字 属性<span class="token operator">=</span><span class="token string">"值"</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">%</span><span class="token operator">></span>    指令包含page  include  taglib 三种</code></pre><h4 id="page-指令"><a href="#page-指令" class="headerlink" title="page 指令"></a>page 指令</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//表示当前页面中的编程语言是java，目前这个属性值只能写成java</span>    Language <span class="token operator">=</span> <span class="token string">"java"</span><span class="token comment" spellcheck="true">//在当前页面中要引入哪些包下的类</span>    <span class="token keyword">import</span> <span class="token operator">=</span> <span class="token string">"java.util.HashMap"</span>    <span class="token keyword">import</span> <span class="token operator">=</span> <span class="token string">"java.util.HashMap,java.sql.Connection"</span><span class="token comment" spellcheck="true">//设置jsp页面文件保存时候所用的编码</span>    pageEncoding <span class="token operator">=</span> <span class="token string">"UTF-8"</span><span class="token comment" spellcheck="true">//设置服务器将来使用io把jsp页面内容一行一行的输出给浏览器的时候，使用什么编码向浏览器输出         contentType = "text/html;charset=UTF-8"</span><span class="token comment" spellcheck="true">//设置jsp页面被翻译成java文件的时候，java文件中的类要继承哪个父类。这个属性不用设置，jsp引擎会给它一个默认的父类去继承的</span>    <span class="token keyword">extends</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token comment" spellcheck="true">//设置当前这个jsp页面是否支持session对象的使用        默认是支持的</span>    session <span class="token operator">=</span> <span class="token string">"true"</span><span class="token comment" spellcheck="true">//设置jsp页面是否是线程安全的</span>    isThreadSafe <span class="token operator">=</span> <span class="token string">"true"</span><span class="token comment" spellcheck="true">//如果a.jsp页面中设置了errorPage = "b,jsp"，那么a.jsp页面在运行的时候一旦出错，就会自动跳转到b.jsp里面</span>    errorPage <span class="token operator">=</span> <span class="token string">""</span><span class="token comment" spellcheck="true">//如果一个页面中设置了isErrorPage = "true",那么就表示这个页面是用来专门显示错误信息的面。   然后在这个页面中就能够使用到隐藏对象exception来显示出错误的信息了（需要使用jsp的内置对象）</span>    isErrorPage <span class="token operator">=</span> <span class="token string">""</span></code></pre><h4 id="include-指令"><a href="#include-指令" class="headerlink" title="include 指令"></a>include 指令</h4><pre class=" language-java"><code class="language-java">写法：        <span class="token operator">&lt;</span><span class="token operator">%</span>@ include file <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">%</span><span class="token operator">></span>作用：    ​在当前页面中使用include指令可以把另一个页面的内容引入到当前页面    ​一个页面包含<span class="token operator">/</span>引入另一个页面有两种方式：        ​静态包含    <span class="token operator">&lt;</span><span class="token operator">%</span>@ include file <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">%</span><span class="token operator">></span>         ​动态包含    <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>include page <span class="token operator">=</span> <span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>include<span class="token operator">></span>静态包含特点：    ​a<span class="token punctuation">.</span>jsp页面中静态包含了b<span class="token punctuation">.</span>jsp页面，那么在翻译期间，jsp引擎在翻译a<span class="token punctuation">.</span>jsp成为一个              a_jsp<span class="token punctuation">.</span>java文件的时候，发现jsp页面中有include指令，这时候jsp引擎就会把被包含耳钉页面       b<span class="token punctuation">.</span>jsp中的内容原封不动的拿到 a_jsp<span class="token punctuation">.</span>java中，然后用io流输出出去</code></pre><h4 id="taglib-指令"><a href="#taglib-指令" class="headerlink" title="taglib 指令"></a>taglib 指令</h4><pre class=" language-java"><code class="language-java">作用：    在当前jsp页面中引入一些特殊的标签库    例：        ​jstl标签库        ​struts2标签库        ​spring标签库</code></pre><h3 id="3）jsp的动作元素"><a href="#3）jsp的动作元素" class="headerlink" title="3）jsp的动作元素"></a>3）jsp的动作元素</h3><pre class=" language-java"><code class="language-java">    <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>useBean id <span class="token operator">=</span> <span class="token string">"s"</span> <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">"com.briup.bean.Student"</span> scope <span class="token operator">=</span> <span class="token string">"page"</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>useBean<span class="token operator">></span>相当于代码：    <span class="token operator">&lt;</span><span class="token operator">%</span>        Student s <span class="token operator">=</span> null<span class="token punctuation">;</span>        s <span class="token operator">=</span> <span class="token punctuation">(</span>Student<span class="token punctuation">)</span>pageContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">==</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>            s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            pageContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>setProperty property <span class="token operator">=</span> <span class="token string">"name"</span> value <span class="token operator">=</span> <span class="token string">"tom"</span> name <span class="token operator">=</span> <span class="token string">"s"</span> <span class="token operator">/</span><span class="token operator">></span>相当于代码：       <span class="token operator">&lt;</span><span class="token operator">%</span>        Student s <span class="token operator">=</span> <span class="token punctuation">(</span>Student<span class="token punctuation">)</span>pageContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        s<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>getProperty property <span class="token operator">=</span> <span class="token string">"name"</span> name <span class="token operator">=</span> <span class="token string">"s"</span> <span class="token operator">/</span><span class="token operator">></span>相当于代码：    <span class="token operator">&lt;</span><span class="token operator">%</span>        Student s <span class="token operator">=</span> <span class="token punctuation">(</span>Student<span class="token punctuation">)</span>pageContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">%</span><span class="token operator">></span>       <span class="token comment" spellcheck="true">//页面跳转</span>        <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>forward page <span class="token operator">=</span> <span class="token string">"target.jsp"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>forward<span class="token operator">></span>    <span class="token comment" spellcheck="true">//页面跳转的同时还可以传参数  </span>        <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>forward page<span class="token operator">=</span><span class="token string">"target.jsp?name=tom"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>forward<span class="token operator">></span>        或        <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>forward page <span class="token operator">=</span> <span class="token string">"target.jsp"</span><span class="token operator">></span>            <span class="token comment" spellcheck="true">//这个动作元素专门是传参数使用的</span>            <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>param value <span class="token operator">=</span> <span class="token string">"tom"</span> name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>forward<span class="token operator">></span>          <span class="token comment" spellcheck="true">//使用jsp的动作元素向浏览器输出一个标签</span>        <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>element name <span class="token operator">=</span> <span class="token string">"font"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>attribute name <span class="token operator">=</span> <span class="token string">"color"</span><span class="token operator">></span>blue<span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>attribute<span class="token operator">></span>            <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>body<span class="token operator">></span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>body<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>element<span class="token operator">></span>     这个效果相当于在页面代码中直接写上        <span class="token operator">&lt;</span>font color <span class="token operator">=</span> <span class="token string">"blue"</span><span class="token operator">></span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>font<span class="token operator">></span>        或        <span class="token operator">&lt;</span><span class="token operator">%</span>               out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;font color='blue'>hello world&lt;/font>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token operator">%</span><span class="token operator">></span></code></pre><h4 id="动态包含"><a href="#动态包含" class="headerlink" title="动态包含"></a>动态包含</h4><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//动态包含</span>    <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>include page <span class="token operator">=</span> <span class="token string">"foot.jsp"</span><span class="token operator">></span>        <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>param value <span class="token operator">=</span> <span class="token string">"jack"</span> name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>include<span class="token operator">></span>        </code></pre><blockquote><p>【注意】动态包含不能使用 url?name=tom这种传参方式</p></blockquote><h4 id="动态包含特点"><a href="#动态包含特点" class="headerlink" title="动态包含特点"></a>动态包含特点</h4><pre class=" language-java"><code class="language-java">在把jsp文件翻译成java文件的期间，动态包含并不会去把包含的页面原封不动的拿过来​而是会把动态包含这个标签翻译成一个方法的调用​将来运行页面调用到这个方法的时候才会去拿被包含页面的内容​同时还可以给动态包含的页面传参数​静态包含是不能传参数的</code></pre><blockquote><p>【注意】静态包含的执行效率高于动态包含的执行效率</p></blockquote><h2 id="6-errorPage与isErrorPage的区别-面试常考"><a href="#6-errorPage与isErrorPage的区别-面试常考" class="headerlink" title="6.errorPage与isErrorPage的区别(面试常考)"></a>6.errorPage与isErrorPage的区别(面试常考)</h2><pre class=" language-java"><code class="language-java">    ​errorPage<span class="token operator">:</span>        此页面出错时跳转到我们所写的出错页面    ​isErrorPage <span class="token operator">=</span> <span class="token string">"true"</span> 用来专门显示异常错误信息的页面        默认<span class="token boolean">false</span>           ​另外在这个页面中【能够使用到隐藏对象exception】来显示出错误的信息        ​只有注明参数为<span class="token boolean">true</span>才有exception对象</code></pre><h2 id="7-动态包含与静态包含的区别-面试常考"><a href="#7-动态包含与静态包含的区别-面试常考" class="headerlink" title="7.动态包含与静态包含的区别(面试常考)"></a>7.动态包含与静态包含的区别(面试常考)</h2><pre class=" language-java"><code class="language-java">    ​语法不同        ​静态包含是指令元素中的        <span class="token operator">&lt;</span><span class="token operator">%</span>@ include file<span class="token operator">=</span><span class="token string">""</span><span class="token operator">%</span><span class="token operator">></span>         ​动态包含是动作元素中的        <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>include page<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>jsp<span class="token operator">:</span>include<span class="token operator">></span>    ​原理不同        ​静态包含是将包含页面的整个页面的内容都拿过来，使用io流写回浏览器            只生成一个servlet和<span class="token keyword">class</span>文件         ​动态包含是将包含的页面的标签翻译成 include 方法，在运行期间才会调用，然后结合            生成各自的servlet和<span class="token keyword">class</span>文件    ​参数传递不同        ​静态包含无法传参，不能通过file的url向被包含的jsp页面传递参数        ​动态包含可以传参<span class="token punctuation">,</span>通过 <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>param value<span class="token operator">=</span><span class="token string">""</span> name<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span> 传递参数            传参出现中文乱码：    request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    或过滤器           【注意】传参数的方式不能是 <span class="token operator">?</span>参数名<span class="token operator">=</span>初始值<span class="token punctuation">,</span>    ​静态包含的执行效率更高    ​request对象        静态包含，共用一个request内置对象        动态包含，各用各的request</code></pre><h2 id="8-jsp页面中的注释-comment"><a href="#8-jsp页面中的注释-comment" class="headerlink" title="8.jsp页面中的注释  comment"></a>8.jsp页面中的注释  comment</h2><h3 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h3><pre class=" language-jsp"><code class="language-jsp"><!-- html/xml 中的注释方式 -->特点：    ​用户在浏览器中右键查看源代码【能】看到这个注释    ​在服务器端，这个jsp页面被翻译成的java文件中【能】看到这个注释注意：用这种注释注释后没有效果的有    ​jsp动作元素    注释后jsp动作元素正常执行    ​EL表达式例：    ​无效用法        <!--  <jsp:forward page="hello.jsp"></jsp:forward>  -->        <!--  ${}  -->    ​解决方法        <%--  <jsp:forward page="hello.jsp"></jsp:forward>  --%>        <%--  ${}  --%></code></pre><h3 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h3><pre class=" language-java"><code class="language-java"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">--</span>  jsp中的注释方式（隐藏注释）  <span class="token operator">--</span><span class="token operator">%</span><span class="token operator">></span>特点：      ​用户在浏览器中右键查看源代码【不能】看到这个注释，及内容    ​在服务器端，这个jsp页面被翻译成的java文件中【不能】看到这个注释</code></pre><h3 id="第三种"><a href="#第三种" class="headerlink" title="第三种"></a>第三种</h3><pre class=" language-java"><code class="language-java">java中的注释方式，但这种注释方式只能在jsp的脚本或者声明中使用    <span class="token comment" spellcheck="true">//String name = "tom";</span>    <span class="token comment" spellcheck="true">/*        int b = 10;    */</span>    <span class="token comment" spellcheck="true">/**        Double c = 20.0;     */</span>特点：    ​用户在浏览器中右键查看源代码【不能】看到这个注释    ​在服务器端，这个jsp页面被翻译成的java文件中【能】看到这个注释</code></pre><h2 id="9-内置对象（在jsp页面代码中可以直接使用的对象）"><a href="#9-内置对象（在jsp页面代码中可以直接使用的对象）" class="headerlink" title="9.内置对象（在jsp页面代码中可以直接使用的对象）"></a>9.内置对象（在jsp页面代码中可以直接使用的对象）</h2><pre class=" language-java"><code class="language-java">其实是只有在这个 <span class="token function">_jspService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法中才能使用的jsp脚本和jsp表达式    jsp脚本和jsp表达式    <span class="token operator">&lt;</span><span class="token operator">%</span>  脚本  <span class="token operator">%</span><span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">%=</span>  表达式  <span class="token operator">%</span><span class="token operator">></span></code></pre><h3 id="共有9个内置对象可以直接使用"><a href="#共有9个内置对象可以直接使用" class="headerlink" title="共有9个内置对象可以直接使用"></a>共有9个内置对象可以直接使用</h3><table><thead><tr><th align="left">类型</th><th align="left">名字</th><th align="left">解释</th><th align="left">范围</th></tr></thead><tbody><tr><td align="left">PageContext</td><td align="left">pageContext</td><td align="left">jsp页面上下文</td><td align="left">同一页面</td></tr><tr><td align="left">HttpServletRequest</td><td align="left">request</td><td align="left">请求</td><td align="left">一次请求</td></tr><tr><td align="left">HttpSession</td><td align="left">session</td><td align="left">会话</td><td align="left">一次会话</td></tr><tr><td align="left">ServletContext</td><td align="left">application</td><td align="left">应用</td><td align="left">服务器开启到关闭</td></tr><tr><td align="left">Object</td><td align="left">page</td><td align="left">jsp页面本身，相当于this，其实就是jsp页面翻译成的java类对象</td><td align="left"></td></tr><tr><td align="left">HttpServletResponse</td><td align="left">response</td><td align="left">响应</td><td align="left"></td></tr><tr><td align="left">JspWriter</td><td align="left">out</td><td align="left">输出流</td><td align="left"></td></tr><tr><td align="left">ServletConfig</td><td align="left">config</td><td align="left">jsp的配置信息</td><td align="left"></td></tr><tr><td align="left">Throwable</td><td align="left">exception</td><td align="left">当设置isErrorPage(true)时，可处理其他页面异常</td><td align="left"></td></tr></tbody></table><pre class=" language-jsp"><code class="language-jsp"><jsp:useBean id="s" class="com.briup.bean.Student" scope="page"></jsp:useBean>pageContext.setAttribute("stu",s);</code></pre><blockquote><p>【注意】为什么这些对象可以直接使用，因为他们都是在 _jspService这个方法中默认声明出来了。而我们在表达式和脚本中所写的java代码将来是要翻译到 _jspService 方法中的，所以我们在表达式和脚本中写java代码的时候可以直接使用这些对象。</p></blockquote><h4 id="四个范围对象-（在一定范围内可以存取数据）"><a href="#四个范围对象-（在一定范围内可以存取数据）" class="headerlink" title="四个范围对象        （在一定范围内可以存取数据）"></a>四个范围对象        （在一定范围内可以存取数据）</h4><pre class=" language-java"><code class="language-java">    ​pageContext        <span class="token comment" spellcheck="true">//页面范围（只能在同一页面中起作用）</span>    ​request            <span class="token comment" spellcheck="true">//一次请求之间</span>    ​session            <span class="token comment" spellcheck="true">//一次会话之间</span>    ​application        <span class="token comment" spellcheck="true">//服务器开启到服务器关闭</span></code></pre><h4 id="page"><a href="#page" class="headerlink" title="page"></a>page</h4><pre class=" language-java"><code class="language-java">    ​虽然名字叫page，但是这个并不是页面范围对象，它是Object类型的对象，表示当前这个页面本身（jsp页面就是一个servlet）    ​其实page指的是jsp页面翻译成的java类对象，服务器使用这个java类所创建的对象（把page对象输出即可看到），所以说page对象代表jsp页面本身       <span class="token operator">&lt;</span><span class="token operator">%=</span><span class="token punctuation">(</span>page <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span><span class="token operator">&lt;</span>br<span class="token operator">></span>            输出的结果为 <span class="token boolean">true</span></code></pre><h4 id="out"><a href="#out" class="headerlink" title="out"></a>out</h4><pre class=" language-java"><code class="language-java">    用于向浏览器输出内容的输出流</code></pre><h4 id="exception"><a href="#exception" class="headerlink" title="exception"></a>exception</h4><pre class=" language-java"><code class="language-java">    ​这个对象其实我们并不能直接使用，需要相关设置后才能使用，这个可以算是一个隐藏的对象。    ​这个对象表示将来这个jsp页面运行出错的地方所抛出的异常对象</code></pre><h2 id="10-jsp页面中的路径"><a href="#10-jsp页面中的路径" class="headerlink" title="10.jsp页面中的路径"></a>10.jsp页面中的路径</h2><pre class=" language-java"><code class="language-java">    ​一般情况下，jsp中路径问题是我们之前在servlet中讨论的HTML里面的路径问题是一样的，但是在         jsp中可以动态获得该项目的url    ​如果在jsp页面的上面写了这样一个脚本        <span class="token operator">&lt;</span><span class="token operator">%</span>           String path <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//包名</span>           String basePath <span class="token operator">=</span> requrst<span class="token punctuation">.</span><span class="token function">getScheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"://"</span> <span class="token operator">+</span>                                request<span class="token punctuation">.</span><span class="token function">getServerName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getServerPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> path <span class="token operator">+</span> "         <span class="token operator">%</span><span class="token operator">></span>    ​并且在 <span class="token operator">&lt;</span>head<span class="token operator">></span> 标签中加入了一个子标签        <span class="token operator">&lt;</span>base href<span class="token operator">=</span><span class="token string">"&lt;%=basePath%>"</span> <span class="token operator">/</span><span class="token operator">></span>    ​那么在这个jsp页面中，我们再去写上一个相对路径（最左边没有加<span class="token operator">/</span>的那种路径）<span class="token punctuation">,</span>它就不是相对于地     址栏中的当前路径了，而是要相对于这个basePath变量所代表的的这个路径</code></pre><h2 id="11-EL表达式"><a href="#11-EL表达式" class="headerlink" title="11.EL表达式"></a>11.EL表达式</h2><pre class=" language-java"><code class="language-java">形式：     $<span class="token punctuation">{</span> <span class="token punctuation">}</span>作用：        从一个范围里面取值或者从一个对象中取值或是向页面输出值（取值并显示）    ​接收客户端参数        $<span class="token punctuation">{</span>param<span class="token punctuation">.</span>name<span class="token punctuation">}</span>    ​指定范围并取值        $<span class="token punctuation">{</span>pageScope<span class="token punctuation">.</span>name1<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>requestScope<span class="token punctuation">.</span>name2<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>sessionScope<span class="token punctuation">.</span>name3<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>applicationScope<span class="token punctuation">.</span>name4<span class="token punctuation">}</span>    ​可以不指定范围就去取值        $<span class="token punctuation">{</span>name<span class="token punctuation">}</span>        ​这个时候会按照pageContext、 request、 session、 application 这样的顺序依次的          去找有没有一个叫name的值存在，一但找到了就输出出来，最终没有找到那么什么都不输出    ​取出一个对象中的属性值        $<span class="token punctuation">{</span>requestScope<span class="token punctuation">.</span>student<span class="token punctuation">.</span>id<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>requestScope<span class="token punctuation">.</span>student<span class="token punctuation">.</span>name<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>requestScope<span class="token punctuation">.</span>student<span class="token punctuation">.</span>age<span class="token punctuation">}</span>        或        $<span class="token punctuation">{</span>student<span class="token punctuation">.</span>id<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">.</span>name<span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">.</span>age<span class="token punctuation">}</span>        或        $<span class="token punctuation">{</span>student<span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">[</span><span class="token string">"age"</span><span class="token punctuation">]</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>student<span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>    【注意】          ​$<span class="token punctuation">{</span>student<span class="token punctuation">.</span>id<span class="token punctuation">}</span> 表示是要调用student对象中的getId方法，至少对象中有没有id属性对               这个操作没有任何影响          ​所以这个id指的是对象中的 property ，而不是 attribute          ​如果Student类中一个方法是getAddress，返回一个Address类的对象，Address类中有           一个方法getCity，这个时候我们就可以这样写去拿到city属性值                $<span class="token punctuation">{</span>student<span class="token punctuation">.</span>address<span class="token punctuation">.</span>city<span class="token punctuation">}</span>    ​输出字符串        $<span class="token punctuation">{</span><span class="token string">"hello"</span><span class="token punctuation">}</span>    ​输出运算结果或者<span class="token keyword">boolean</span>表达式        $<span class="token punctuation">{</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token punctuation">}</span>        $<span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">+</span><span class="token number">5</span><span class="token operator">*</span><span class="token number">3</span> <span class="token punctuation">}</span>        $<span class="token punctuation">{</span>u<span class="token punctuation">.</span>age <span class="token operator">*</span> <span class="token number">10</span> <span class="token punctuation">}</span>        $<span class="token punctuation">{</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token number">3</span> <span class="token punctuation">}</span>        $<span class="token punctuation">{</span>empty <span class="token string">""</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//为空的话返回true</span>        $<span class="token punctuation">{</span>empty <span class="token string">"hello"</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>not empty <span class="token string">"hello"</span><span class="token punctuation">}</span>        <span class="token comment" spellcheck="true">//取否 不为空的话返回 true</span>        $<span class="token punctuation">{</span><span class="token operator">!</span> empty <span class="token string">"hello"</span><span class="token punctuation">}</span>        $<span class="token punctuation">{</span>param<span class="token punctuation">.</span>score <span class="token operator">></span> <span class="token number">50</span> <span class="token punctuation">}</span>        $<span class="token punctuation">{</span>param<span class="token punctuation">.</span>score <span class="token operator">></span> <span class="token number">60</span><span class="token operator">?</span><span class="token string">"good"</span><span class="token operator">:</span><span class="token string">"bad"</span><span class="token punctuation">}</span>    ​输出数组、集合中的元素        <span class="token operator">&lt;</span><span class="token operator">%</span>            String<span class="token punctuation">[</span><span class="token punctuation">]</span> str <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"world"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            List<span class="token operator">&lt;</span>String<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"jake"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span>Integer<span class="token operator">></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"str"</span><span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"map"</span><span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">%</span><span class="token operator">></span>        $<span class="token punctuation">{</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">></span>        $<span class="token punctuation">{</span>list<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">></span>        $<span class="token punctuation">{</span>map<span class="token punctuation">[</span><span class="token string">"c"</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">></span>    ​key的值中含有特殊符号点        例：           request对象中有一个key值为；javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>forward<span class="token punctuation">.</span>request_uri           要取这个值必须用以下形式            $<span class="token punctuation">{</span>requestScope<span class="token punctuation">[</span><span class="token string">'javax.servlet.forward.request_uri'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span></code></pre><h2 id="12-JSTL标签库-（JSP-Standard-Tag-Library）"><a href="#12-JSTL标签库-（JSP-Standard-Tag-Library）" class="headerlink" title="12.JSTL标签库        （JSP Standard Tag Library）"></a>12.JSTL标签库        （JSP Standard Tag Library）</h2><h3 id="1）让web项目支持JSTL标签库"><a href="#1）让web项目支持JSTL标签库" class="headerlink" title="1）让web项目支持JSTL标签库"></a>1）让web项目支持JSTL标签库</h3><pre class=" language-java"><code class="language-java">    在eclipse中，建立一个文本项目，默认都是不支持JSTL，所以需要我们自己把JSTL的jar包导入到项目中（复制，粘贴到项目中的lib目录）：    jst1<span class="token operator">-</span><span class="token number">1.2</span><span class="token punctuation">.</span>jar</code></pre><h3 id="2）把JSTL标签库导入到某一个jsp页面中"><a href="#2）把JSTL标签库导入到某一个jsp页面中" class="headerlink" title="2）把JSTL标签库导入到某一个jsp页面中"></a>2）把JSTL标签库导入到某一个jsp页面中</h3><pre class=" language-java"><code class="language-java">使用jsp中的taglib指令    <span class="token operator">&lt;</span><span class="token operator">%</span>@ taglib uri <span class="token operator">=</span> <span class="token string">"http://java.sun.com/jsp/jstl/core"</span> prefix<span class="token operator">=</span><span class="token string">"c"</span> <span class="token operator">%</span><span class="token operator">></span>    prefix<span class="token operator">=</span><span class="token string">"c"</span>相当于给这个标签库起一个别名，将来在页面中就是用以c开头的标签来使用标签库中的标      签。这个别名也可以叫其他的名字    <span class="token operator">&lt;</span>c<span class="token operator">:</span>forEach<span class="token operator">></span>标签<span class="token operator">:</span>        <span class="token operator">&lt;</span><span class="token operator">%</span>            List<span class="token operator">&lt;</span>Student<span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span>Student<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"tom"</span><span class="token punctuation">,</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"tom2"</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"tom3"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"tom4"</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span>forEach items <span class="token operator">=</span><span class="token string">"${list}"</span> var<span class="token operator">=</span><span class="token string">"stu"</span> begin<span class="token operator">=</span><span class="token string">"0"</span> end<span class="token operator">=</span><span class="token string">"3"</span>                     varStatus<span class="token operator">=</span><span class="token string">"status"</span> step<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">></span>            $<span class="token punctuation">{</span>status<span class="token punctuation">.</span>index<span class="token punctuation">}</span><span class="token operator">:</span>$<span class="token punctuation">{</span>stu<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">-</span>$<span class="token punctuation">{</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">-</span>$<span class="token punctuation">{</span>stu<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>foEach<span class="token operator">></span>         ​begin<span class="token operator">=</span><span class="token string">""</span>默认值是<span class="token number">0</span>  end <span class="token operator">=</span><span class="token string">""</span>默认值是最后一个元素<span class="token punctuation">,</span>         ​一般的遍历只要写var和items来个属性即可</code></pre><h4 id="遍历List集合"><a href="#遍历List集合" class="headerlink" title="遍历List集合"></a>遍历List集合</h4><pre class=" language-java"><code class="language-java">    map是一个Map类型的集合，放到了request对象中，entry是我们定义的一个变量，用做接收每次遍历到集合中的一组键值对，我们可以通过entry<span class="token punctuation">.</span>key  entry<span class="token punctuation">.</span>value 分别拿到这次遍历到的key值和value值    <span class="token operator">&lt;</span>c<span class="token operator">:</span>foEach items<span class="token operator">=</span><span class="token string">"${map}"</span> var<span class="token operator">=</span><span class="token string">"entry"</span><span class="token operator">></span>        $<span class="token punctuation">{</span>entry<span class="token punctuation">.</span>key <span class="token punctuation">}</span> <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">></span> $<span class="token punctuation">{</span>entry<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token punctuation">}</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span> $<span class="token punctuation">{</span>entry<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>        $<span class="token punctuation">{</span>entry<span class="token punctuation">.</span>value<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>forEach<span class="token operator">></span>    <span class="token operator">&lt;</span>c<span class="token operator">:</span>out<span class="token operator">></span> 标签        向页面输出内容，就像 <span class="token operator">&lt;</span><span class="token operator">%=</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span>out value<span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>out<span class="token operator">></span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span>out value<span class="token operator">=</span><span class="token string">"${5+5}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>out<span class="token operator">></span>    <span class="token comment" spellcheck="true">//students是放在request中的List集合,集合里面是Student对象</span>           <span class="token operator">&lt;</span>c<span class="token operator">:</span>out value<span class="token operator">=</span><span class="token string">"${students[2].id}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>out<span class="token operator">></span>    <span class="token operator">&lt;</span>c<span class="token operator">:</span>set<span class="token operator">></span> 标签        向某一个范围对象中存放一个值        <span class="token operator">&lt;</span>c<span class="token operator">:</span>set var<span class="token operator">=</span><span class="token string">"name"</span> value<span class="token operator">=</span><span class="token string">"jack"</span> scope<span class="token operator">=</span><span class="token string">"request"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>set<span class="token operator">></span>    <span class="token operator">&lt;</span>c<span class="token operator">:</span>remove<span class="token operator">></span> 标签        从一个范围对象中把某个值给移除掉        <span class="token operator">&lt;</span>c<span class="token operator">:</span>remove var<span class="token operator">=</span><span class="token string">"name"</span> scope<span class="token operator">=</span><span class="token string">"request"</span><span class="token operator">/</span><span class="token operator">></span>    <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span> 标签        条件判断        <span class="token operator">&lt;</span><span class="token operator">%</span>            request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"score"</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${score > 85}"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>font color <span class="token operator">=</span> <span class="token string">"red"</span><span class="token operator">></span>你的分数超过了<span class="token number">85</span>分<span class="token operator">&lt;</span><span class="token operator">/</span>font<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${score > 95}"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>font color <span class="token operator">=</span> <span class="token string">"red"</span><span class="token operator">></span>你的分数超过了<span class="token number">95</span>分<span class="token operator">&lt;</span><span class="token operator">/</span>font<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>           相当于        <span class="token keyword">if</span><span class="token punctuation">(</span>score<span class="token operator">></span><span class="token number">85</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>score<span class="token operator">></span><span class="token number">95</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>        <span class="token punctuation">}</span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">catch</span><span class="token operator">></span> 标签        处理产生错误的异常状况，并且将错误信息储存起来        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">catch</span> var<span class="token operator">=</span><span class="token string">"catchException"</span><span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span> <span class="token operator">%</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">catch</span><span class="token operator">></span>        <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">if</span> test<span class="token operator">=</span><span class="token string">"${catchException != null}"</span><span class="token operator">></span>            <span class="token operator">&lt;</span>p<span class="token operator">></span>                异常为：$<span class="token punctuation">{</span>catchException<span class="token punctuation">}</span><span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">></span>                发生了异常<span class="token operator">:</span> $<span class="token punctuation">{</span>catchException<span class="token punctuation">.</span>message<span class="token punctuation">}</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span><span class="token keyword">if</span><span class="token operator">></span>    <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">import</span><span class="token operator">></span> 标签        和 <span class="token operator">&lt;</span>jsp<span class="token operator">:</span>include<span class="token operator">></span> 的作用基本相同，<span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">import</span><span class="token operator">></span>还可以选择把引入的内容先保存在一个变量         中，之后通过EL表达式在拿出来显示            <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">import</span> url<span class="token operator">=</span><span class="token string">"a.jsp"</span><span class="token operator">/</span><span class="token operator">></span>            或            <span class="token operator">&lt;</span>c<span class="token operator">:</span><span class="token keyword">import</span> var<span class="token operator">=</span><span class="token string">"data"</span> url<span class="token operator">=</span><span class="token string">"a,jsp"</span> <span class="token operator">/</span><span class="token operator">></span>            $<span class="token punctuation">{</span>data<span class="token punctuation">}</span>            <span class="token operator">&lt;</span>c<span class="token operator">:</span>choose<span class="token operator">></span> 标签            <span class="token operator">&lt;</span>c<span class="token operator">:</span>when<span class="token operator">></span> 标签            <span class="token operator">&lt;</span>c<span class="token operator">:</span>otherwise<span class="token operator">></span> 标签            例：            <span class="token operator">&lt;</span>c<span class="token operator">:</span>choose<span class="token operator">></span>                <span class="token operator">&lt;</span>c<span class="token operator">:</span>when test<span class="token operator">=</span><span class="token string">"${score>=90}"</span><span class="token operator">></span>优秀<span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>when<span class="token operator">></span>                <span class="token operator">&lt;</span>c<span class="token operator">:</span>when test<span class="token operator">=</span><span class="token string">"${score>=80}"</span><span class="token operator">></span>良好<span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>when<span class="token operator">></span>                <span class="token operator">&lt;</span>c<span class="token operator">:</span>when test<span class="token operator">=</span><span class="token string">"${score>=70}"</span><span class="token operator">></span>中等<span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>when<span class="token operator">></span>                <span class="token operator">&lt;</span>c<span class="token operator">:</span>when test<span class="token operator">=</span><span class="token string">"${score>=60}"</span><span class="token operator">></span>及格<span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>when<span class="token operator">></span>                <span class="token operator">&lt;</span>c<span class="token operator">:</span>otherwise<span class="token operator">></span>差评<span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>otherwise<span class="token operator">></span>            <span class="token operator">&lt;</span><span class="token operator">/</span>c<span class="token operator">:</span>choose<span class="token operator">></span>               相当于：            <span class="token keyword">if</span><span class="token punctuation">{</span>score<span class="token operator">>=</span><span class="token number">90</span><span class="token punctuation">}</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>score<span class="token operator">>=</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>score<span class="token operator">>=</span><span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>score<span class="token operator">>=</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token punctuation">}</span>    <span class="token operator">&lt;</span>c<span class="token operator">:</span>redirect<span class="token operator">></span> 标签重定向        <span class="token operator">&lt;</span>c<span class="token operator">:</span>redirect url<span class="token operator">=</span><span class="token string">"a.jsp"</span><span class="token operator">/</span><span class="token operator">></span></code></pre><h2 id="13-自定义标签"><a href="#13-自定义标签" class="headerlink" title="13.自定义标签"></a>13.自定义标签</h2><pre class=" language-java"><code class="language-java">    JSP1<span class="token number">.1</span>版本中增加了自定义标签库规范，但是在 JSP1<span class="token number">.1</span>规范中开发自定义标签库比较复杂，JSP2<span class="token number">.0</span> 规范简化了标签库的开发，只需如下几个步骤    ​编写自定义标签处理类    ​建立一个 <span class="token operator">*</span><span class="token punctuation">.</span>tld 文件，每个 <span class="token operator">*</span><span class="token punctuation">.</span>tld 文件对应一个标签库，每个标签库可以对应多个标签，该文件放在      WEB<span class="token operator">-</span>INF下即可    ​在jsp文件中使用taglib指令引入并使用自定义标签    【注意】我们使用的tomcat8<span class="token number">.5</span><span class="token punctuation">.</span><span class="token number">38</span>中实现的是JSP2<span class="token number">.3</span>的规范        ​javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span>tagext<span class="token punctuation">.</span>JspTag接口，所有的标签都需要实现这个接口        ​JSP2<span class="token number">.0</span>版本中，提供了javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token punctuation">.</span>tagext<span class="token punctuation">.</span>SimpleTagSupport类，我们编写的自             定义标签处理类继承该类即可</code></pre><h3 id="【例1】编写一个标签，可以自动输出hello"><a href="#【例1】编写一个标签，可以自动输出hello" class="headerlink" title="【例1】编写一个标签，可以自动输出hello"></a>【例1】编写一个标签，可以自动输出hello</h3><h4 id="第一步-继承SimpleTagSupport，重写doTag即可"><a href="#第一步-继承SimpleTagSupport，重写doTag即可" class="headerlink" title="第一步    继承SimpleTagSupport，重写doTag即可"></a>第一步    继承SimpleTagSupport，重写doTag即可</h4><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloTag</span> <span class="token keyword">extends</span> <span class="token class-name">SimpleTagSuppport</span><span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JspException<span class="token punctuation">,</span>IOException<span class="token punctuation">{</span>            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getJspContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h4 id="第二步-编写my-tag-tld文件-名字随意-，存放在WEB-INF下："><a href="#第二步-编写my-tag-tld文件-名字随意-，存放在WEB-INF下：" class="headerlink" title="第二步    编写my-tag.tld文件(名字随意)，存放在WEB-INF下："></a>第二步    编写my-tag.tld文件(名字随意)，存放在WEB-INF下：</h4><pre class=" language-jsp"><code class="language-jsp">    <?xml version="1.0" encoding="ISO-8859-1" ?>    <!DOCTYPE taglib PUBLIC "-//Sun Microsystems, Inc.//DTD JSP Tag Library         1.2//EN" "http://java.sun.com/j2ee/dtd/web-jsptaglibrary_1_2.dtd">    <taglib>      <tlib-version>1.0</tlib-version>      <jsp-version>1.2</jsp-version>      <short-name>my-taglib</short-name>      <uri>briup-taglib</uri>      <tag>        <name>hello</name>        <tag-class>com.briup.test.HelloTag</tag-class>        <body-content>empty</body-content>      </tag>      </taglib></code></pre><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><pre class=" language-java"><code class="language-java">    ​该文件的样例可以在tomcat中的实例项目中复制出来修改        D<span class="token operator">:</span>\apache<span class="token operator">-</span>tomcat<span class="token operator">-</span><span class="token number">8.5</span><span class="token punctuation">.</span><span class="token number">38</span>\webapps\examples\WEB<span class="token operator">-</span>INF\jsp\example<span class="token operator">-</span>taglib<span class="token punctuation">.</span>tld文件    ​<span class="token operator">&lt;</span>body<span class="token operator">-</span>content<span class="token operator">></span>标签中的值，表示自定义标签中body部分可以填写的内容类型，有四种：        ​empty            空标记，即起始标记和结束标记之间没有内容<span class="token operator">&lt;</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>        ​scriptless            接受文本、EL和JSP动作             ​<span class="token function">JSP</span> <span class="token punctuation">(</span>SimpleTagSupport类型不支持<span class="token punctuation">)</span>            接受所有JSP语法，如定制的或内部的tag、scripts、静态HTML、脚本元素、JSP指令和动作        ​tagdependent            标签体内容直接被写入BodyContent，由自定义标签类来进行处理，而不被JSP容器解释</code></pre><h4 id="第三步-jsp页面中引入并使用标签库"><a href="#第三步-jsp页面中引入并使用标签库" class="headerlink" title="第三步    jsp页面中引入并使用标签库"></a>第三步    jsp页面中引入并使用标签库</h4><pre class=" language-xml"><code class="language-xml">    &lt;%@ page language="java" contentType="text/html; charset=UTF-8"    pageEncoding="UTF-8"%>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%@</span> <span class="token attr-name">taglib</span> <span class="token attr-name">uri</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>briup-taglib<span class="token punctuation">"</span></span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>briup<span class="token punctuation">"</span></span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>    <span class="token doctype">&lt;!DOCTYPE html></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>hello.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">briup:</span>hello</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">briup:</span>hello</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h3 id="【例2】编写一个标签，可以自动输出hello并附带上标签体中的内容"><a href="#【例2】编写一个标签，可以自动输出hello并附带上标签体中的内容" class="headerlink" title="【例2】编写一个标签，可以自动输出hello并附带上标签体中的内容"></a>【例2】编写一个标签，可以自动输出hello并附带上标签体中的内容</h3><h4 id="第一步-修改HelloTag类"><a href="#第一步-修改HelloTag类" class="headerlink" title="第一步    修改HelloTag类"></a>第一步    修改HelloTag类</h4><pre class=" language-java"><code class="language-java">    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloTag</span> <span class="token keyword">extends</span> <span class="token class-name">SimpleTagSupport</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JspException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//准备好一个StringWriter，接收标签体内容</span>            StringWriter sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//把标签体内容写到StringWriter中</span>            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getJspBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//从StringWriter中获取标签体的内容</span>            String tagBody <span class="token operator">=</span> sw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getJspContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello! "</span><span class="token operator">+</span>tagBody<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h4 id="第二步-修改my-tag-tld文件"><a href="#第二步-修改my-tag-tld文件" class="headerlink" title="第二步    修改my-tag.tld文件"></a>第二步    修改my-tag.tld文件</h4><pre class=" language-xml"><code class="language-xml">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag-class</span><span class="token punctuation">></span></span>com.briup.test.HelloTag<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body-content</span><span class="token punctuation">></span></span>scriptless<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body-content</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span></code></pre><blockquote><p>【注意】只是修改了<body-content>标签中的值，这里改为scriptless或者tagdependent都是可以的.其他地方不用修改</body-content></p></blockquote><h4 id="第三步-修改jsp文件，添加标签body内容即可"><a href="#第三步-修改jsp文件，添加标签body内容即可" class="headerlink" title="第三步    修改jsp文件，添加标签body内容即可"></a>第三步    修改jsp文件，添加标签body内容即可</h4><pre class=" language-java"><code class="language-java">    <span class="token operator">&lt;</span>briup<span class="token operator">:</span>hello<span class="token operator">></span>tom<span class="token operator">&lt;</span><span class="token operator">/</span>briup<span class="token operator">:</span>hello<span class="token operator">></span></code></pre><h3 id="【-例3】-编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次"><a href="#【-例3】-编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次" class="headerlink" title="【 例3】    编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次"></a>【 例3】    编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次</h3><h4 id="第一步-修改HelloTag类-1"><a href="#第一步-修改HelloTag类-1" class="headerlink" title="第一步    修改HelloTag类"></a>第一步    修改HelloTag类</h4><h5 id="修改1"><a href="#修改1" class="headerlink" title="修改1"></a>修改1</h5><pre class=" language-java"><code class="language-java">添加属性count，提供get<span class="token operator">/</span>set方法，用来接收标签中属性的count属性的值</code></pre><h5 id="修改2"><a href="#修改2" class="headerlink" title="修改2"></a>修改2</h5><pre class=" language-java"><code class="language-java">输出内容语句外面嵌套循环，循环次数由count的值来控制    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloTag</span> <span class="token keyword">extends</span> <span class="token class-name">SimpleTagSupport</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> count<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> JspException<span class="token punctuation">,</span> IOException <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//准备好一个StringWriter，接收标签体内容</span>            StringWriter sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//把标签体内容写到StringWriter中</span>            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getJspBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//从StringWriter中获取标签体的内容</span>            String tagBody <span class="token operator">=</span> sw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>count<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getJspContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello! "</span><span class="token operator">+</span>tagBody<span class="token operator">+</span><span class="token string">"&lt;br>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> count<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>   </code></pre><h4 id="第二步-修改my-tag-tld文件-1"><a href="#第二步-修改my-tag-tld文件-1" class="headerlink" title="第二步    修改my-tag.tld文件"></a>第二步    修改my-tag.tld文件</h4><pre class=" language-xml"><code class="language-xml">修改地方，添加attribute标签来指定属性的相关信息    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag-class</span><span class="token punctuation">></span></span>com.briup.test.HelloTag<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag-class</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body-content</span><span class="token punctuation">></span></span>scriptless<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body-content</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>count<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>required</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>required</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">></span></span></code></pre><h4 id="第三步-修改jsp文件，添加标签的属性"><a href="#第三步-修改jsp文件，添加标签的属性" class="headerlink" title="第三步    修改jsp文件，添加标签的属性"></a>第三步    修改jsp文件，添加标签的属性</h4><pre class=" language-jsp"><code class="language-jsp">    <briup:hello count="5">tom</briup:hello></code></pre><h3 id="【例4】编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次，同时标签体值和属性的值都是要EL表达式来表示"><a href="#【例4】编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次，同时标签体值和属性的值都是要EL表达式来表示" class="headerlink" title="【例4】编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次，同时标签体值和属性的值都是要EL表达式来表示"></a>【例4】编写一个标签，可以自动输出hello，并附带上标签体中的内容，并且根据标签中属性的值，来确定内容将会输出多少次，同时标签体值和属性的值都是要EL表达式来表示</h3><h4 id="第一步-HelloTag类，和例3保持一致，不需要改动"><a href="#第一步-HelloTag类，和例3保持一致，不需要改动" class="headerlink" title="第一步    HelloTag类，和例3保持一致，不需要改动"></a>第一步    HelloTag类，和例3保持一致，不需要改动</h4><h4 id="第二步-修改my-tag-tld文件-2"><a href="#第二步-修改my-tag-tld文件-2" class="headerlink" title="第二步    修改my-tag.tld文件"></a>第二步    修改my-tag.tld文件</h4><pre class=" language-jsp"><code class="language-jsp">修改地方，添加标签<rtexprvalue>，表示支持EL    rtexprvalue的意思是：Runtime Expression Value    <tag>        <name>hello</name>        <tag-class>com.briup.test.HelloTag</tag-class>        <body-content>scriptless</body-content>        <attribute>            <name>count</name>            <required>true</required>            <rtexprvalue>true</rtexprvalue>        </attribute>    </tag></code></pre><h4 id="第三步-修改jsp文件，添加标签的属性-1"><a href="#第三步-修改jsp文件，添加标签的属性-1" class="headerlink" title="第三步    修改jsp文件，添加标签的属性"></a>第三步    修改jsp文件，添加标签的属性</h4><pre class=" language-jsp"><code class="language-jsp">修改地方，添加了jsp脚本，配合测试    <%        request.setAttribute("name", "zs");        request.setAttribute("count", "10");    %>    <briup:hello count="${count }">${name }</briup:hello></code></pre><p><img src="/2020/11/11/qian-duan-ye-mian/jsp-zong-jie/2.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> 前端页面 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态页面 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大数据集群搭建</title>
      <link href="2020/06/10/da-shu-ju/da-shu-ju-ruan-jian-pei-zhi/"/>
      <url>2020/06/10/da-shu-ju/da-shu-ju-ruan-jian-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux新用户设置root密码"><a href="#Linux新用户设置root密码" class="headerlink" title="Linux新用户设置root密码"></a>Linux新用户设置<code>root</code>密码</h1><pre class=" language-shell"><code class="language-shell">sudo passwd root</code></pre><h1 id="一、Ubuntu中设置静态IP"><a href="#一、Ubuntu中设置静态IP" class="headerlink" title="一、Ubuntu中设置静态IP"></a>一、Ubuntu中设置静态IP</h1><h2 id="1-Ubuntu版本18之前"><a href="#1-Ubuntu版本18之前" class="headerlink" title="1.Ubuntu版本18之前"></a>1.Ubuntu版本18之前</h2><h3 id="1-1-查看虚拟机网关"><a href="#1-1-查看虚拟机网关" class="headerlink" title="1.1 查看虚拟机网关"></a>1.1 查看虚拟机网关</h3><h3 id="1-2-使用管理员权限打开-etc-network-interfaces文件"><a href="#1-2-使用管理员权限打开-etc-network-interfaces文件" class="headerlink" title="1.2 使用管理员权限打开 /etc/network/interfaces文件"></a>1.2 使用管理员权限打开 <code>/etc/network/interfaces</code>文件</h3><pre class=" language-shell"><code class="language-shell">sudo vim /etc/network/interfaces</code></pre><h4 id="1-2-1-此处需要输入密码，密码为briup"><a href="#1-2-1-此处需要输入密码，密码为briup" class="headerlink" title="1.2.1 此处需要输入密码，密码为briup"></a>1.2.1 此处需要输入密码，密码为<code>briup</code></h4><h3 id="1-3-在该文件中添加如下内容，并保存"><a href="#1-3-在该文件中添加如下内容，并保存" class="headerlink" title="1.3 在该文件中添加如下内容，并保存"></a>1.3 在该文件中添加如下内容，并保存</h3><pre class=" language-shell"><code class="language-shell">auto eth0iface eth0 inet staticaddress 192.168.142.111netmask 255.255.255.0gateway 192.168.142.2</code></pre><h3 id="1-4-设置DNS配置文件"><a href="#1-4-设置DNS配置文件" class="headerlink" title="1.4 设置DNS配置文件"></a>1.4 设置DNS配置文件</h3><pre class=" language-shell"><code class="language-shell">sudo vim /etc/resolvconf/resolv.conf.d/base</code></pre><h4 id="1-4-1-在文件中添加如下内容，第一个IP要与查出来的网关一致"><a href="#1-4-1-在文件中添加如下内容，第一个IP要与查出来的网关一致" class="headerlink" title="1.4.1 在文件中添加如下内容，第一个IP要与查出来的网关一致"></a>1.4.1 在文件中添加如下内容，第一个IP要与查出来的网关一致</h4><h3 id="1-5-重启网络配置和网络服务"><a href="#1-5-重启网络配置和网络服务" class="headerlink" title="1.5 重启网络配置和网络服务"></a>1.5 重启网络配置和网络服务</h3><pre class=" language-shell"><code class="language-shell">/etc/init.d/networking restart</code></pre><h3 id="1-6-重启Ubuntu系统"><a href="#1-6-重启Ubuntu系统" class="headerlink" title="1.6 重启Ubuntu系统"></a>1.6 重启Ubuntu系统</h3><pre class=" language-shell"><code class="language-shell">reboot</code></pre><h3 id="1-7-关机"><a href="#1-7-关机" class="headerlink" title="1.7 关机"></a>1.7 关机</h3><pre class=" language-shell"><code class="language-shell">haltpoweroffshutdown -h now</code></pre><h3 id="1-7-启动后使用-ifconfig-命令查看IP是否固定成功"><a href="#1-7-启动后使用-ifconfig-命令查看IP是否固定成功" class="headerlink" title="1.7 启动后使用 ifconfig 命令查看IP是否固定成功"></a>1.7 启动后使用 <code>ifconfig</code> 命令查看IP是否固定成功</h3><h2 id="2-Ubuntu版本18之后"><a href="#2-Ubuntu版本18之后" class="headerlink" title="2.Ubuntu版本18之后"></a>2.Ubuntu版本18之后</h2><h3 id="2-1-使用管理员权限打开以下文件"><a href="#2-1-使用管理员权限打开以下文件" class="headerlink" title="2.1 使用管理员权限打开以下文件"></a>2.1 使用管理员权限打开以下文件</h3><pre class=" language-shell"><code class="language-shell">sudo vim /etc/netplan/00-installer-config.yaml</code></pre><h4 id="2-1-1-此处需要输入密码，密码为-briup"><a href="#2-1-1-此处需要输入密码，密码为-briup" class="headerlink" title="2.1.1 此处需要输入密码，密码为 briup"></a>2.1.1 此处需要输入密码，密码为 <code>briup</code></h4><h3 id="2-2-应用新配置文件"><a href="#2-2-应用新配置文件" class="headerlink" title="2.2 应用新配置文件"></a>2.2 应用新配置文件</h3><pre class=" language-shell"><code class="language-shell">sudo netplan apply</code></pre><h3 id="2-3-重启Ubuntu系统"><a href="#2-3-重启Ubuntu系统" class="headerlink" title="2.3 重启Ubuntu系统"></a>2.3 重启Ubuntu系统</h3><pre class=" language-shell"><code class="language-shell">reboot</code></pre><h3 id="2-4-启动后使用-ifconfig-命令查看IP是否固定成功"><a href="#2-4-启动后使用-ifconfig-命令查看IP是否固定成功" class="headerlink" title="2.4 启动后使用 ifconfig 命令查看IP是否固定成功"></a>2.4 启动后使用 <code>ifconfig</code> 命令查看IP是否固定成功</h3><hr><h1 id="二、更改服务器名称"><a href="#二、更改服务器名称" class="headerlink" title="二、更改服务器名称"></a>二、更改服务器名称</h1><pre class=" language-shell"><code class="language-shell">sudo vim /etc/hostname</code></pre><hr><h1 id="三、更改服务器名字和IP的对应关系"><a href="#三、更改服务器名字和IP的对应关系" class="headerlink" title="三、更改服务器名字和IP的对应关系"></a>三、更改服务器名字和IP的对应关系</h1><pre class=" language-shell"><code class="language-shell">sudo vim /etc/hosts</code></pre><h3 id="在Windows中填写服务器名称和ip的对应关系"><a href="#在Windows中填写服务器名称和ip的对应关系" class="headerlink" title="在Windows中填写服务器名称和ip的对应关系"></a>在Windows中填写服务器名称和ip的对应关系</h3><pre><code>C:\Windows\System32\drivers\etc\hosts</code></pre><img src="/2020/06/10/da-shu-ju/da-shu-ju-ruan-jian-pei-zhi/3_5.png" style="zoom:80%;"><hr><p>修改目录权限</p><pre class=" language-shell"><code class="language-shell">sudo chown -R briup:briup /opt/*</code></pre><h1 id="四、设置集群间的免密登录"><a href="#四、设置集群间的免密登录" class="headerlink" title="四、设置集群间的免密登录"></a>四、设置集群间的免密登录</h1><ol><li><p>在<strong>A</strong>和<strong>B</strong>两台主机上都执行<code>ssh-keygen</code>命令，生成公钥<code>id_rsa.pub</code>和私钥<code>id_rsa</code></p></li><li><p>将<strong>A</strong>主机上的公钥通过某种方式拷贝给<strong>B</strong>主机，在 <strong>A</strong> 主机执行：</p><pre class=" language-shell"><code class="language-shell">scp -r .ssh/id_rsa.pub briup@192.168.142.101:~</code></pre></li><li><p>在<strong>B</strong>主机上，将<strong>A</strong>主机的公钥添加(追加)到认证密钥文件中 ，在 <strong>B</strong> 主机执行：</p><pre class=" language-shell"><code class="language-shell">cat ~/id_rsa.pub >> ~/.ssh/authorized_keys</code></pre></li><li><p>配置主机名和<strong>IP</strong>地址的映射关系：</p><ol><li><p>在每一台主机上执行以下命令：</p><pre class=" language-shell"><code class="language-shell">sudo vi /etc/hosts</code></pre></li><li><p>在每台主机的hosts文件中添加以下内容：</p><pre class=" language-shell"><code class="language-shell">127.0.0.1        localhost192.168.142.101    hadoop101192.168.142.102    hadoop102192.168.142.103    hadoop103</code></pre></li><li><p>最好将上述配置在Windows中也配置一下：</p><pre class=" language-shell"><code class="language-shell">C:\Windows\System32\drivers\etc\hosts</code></pre></li></ol></li><li><p>在每台主机上创建存放软件和软链接目录：</p><ol><li><p>创建目录：</p><pre class=" language-shell"><code class="language-shell">sudo mkdir -p /opt/softwares /opt/links</code></pre></li><li><p>修改权限：</p><pre class=" language-shell"><code class="language-shell">sudo chown -R briup:briup /opt/*</code></pre></li></ol></li></ol><h1 id="五、配置-jdk"><a href="#五、配置-jdk" class="headerlink" title="五、配置 jdk"></a>五、配置 jdk</h1><ol><li><p>解压JDK的安装包到/opt/softwares目录中</p><pre class=" language-shell"><code class="language-shell">tar zxvf jdk-8u261-linux-x64.tar.gz -C /opt/softwares/</code></pre></li><li><p>创建JDK安装路径的软链接到<code>/opt/links</code>目录中</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/jdk1.8.0_261 /opt/links/jdk</code></pre></li><li><p>配置环境变量</p><ol><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>添加以下内容</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__JAVA_CONF__####</span><span class="token function">export</span> JAVA_HOME<span class="token operator">=</span>/opt/links/jdk<span class="token function">export</span> JRE_HOME<span class="token operator">=</span><span class="token variable">${JAVA_HOME}</span>/jre<span class="token function">export</span> CLASSPATH<span class="token operator">=</span>.:<span class="token variable">${JAVA_HOME}</span>/lib:<span class="token variable">${JRE_HOME}</span>/lib<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${JAVA_HOME}</span>/bin:<span class="token variable">${JRE_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li></ol></li><li><p>从A服务器上传文件到B服务器</p><pre class=" language-shell"><code class="language-shell">scp -r /opt/softwares/* briup@us2:/opt/softwares/</code></pre></li></ol><h1 id="六、Hadoop-的安装和配置"><a href="#六、Hadoop-的安装和配置" class="headerlink" title="六、Hadoop 的安装和配置"></a>六、Hadoop 的安装和配置</h1><h2 id="1-伪分布式Hadoop集群"><a href="#1-伪分布式Hadoop集群" class="headerlink" title="1.伪分布式Hadoop集群"></a>1.伪分布式Hadoop集群</h2><h3 id="1-1-搭建"><a href="#1-1-搭建" class="headerlink" title="1.1 搭建"></a>1.1 搭建</h3><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf hadoop-2.10.0.tar.gz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/hadoop-2.10.0/ /opt/links/hadoop</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####_HADOOP_CONF_####</span><span class="token function">export</span> HADOOP_HOME<span class="token operator">=</span>/opt/links/hadoop<span class="token function">export</span> HADOOP_USER_NAME<span class="token operator">=</span>briup<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${HADOOP_HOME}</span>/bin:<span class="token variable">${HADOOP_HOME}</span>/sbin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>修改<code>/opt/links/hadoop/etc/hadoop</code>目录下的配置文件</p><ol><li><p>修改<code>hadoop-env.sh</code>文件</p><ul><li>将文件中的<code>JAVA_HOME</code>路径更换为绝对路径</li></ul></li><li><p>修改<code>core-site.xml</code>文件</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>hdfs://hadoopPD:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- 新增加的配置 --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hadoop.proxyuser.briup.hosts<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hadoop.proxyuser.briup.groups<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hadoop.http.staticuser.user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>briup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre></li><li><p>修改<code>hdfs-site.xml</code>文件</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></code></pre></li></ol><configuration>           <property>                   <name>dfs.nameservices</name>                   <value>hadoop-cluster</value>           </property>           <!--数据备份的个数-->           <property>                   <name>dfs.replication</name>                   <value>3</value>           </property>           <property>                   <name>dfs.blocksize</name>                   <value>32M</value>           </property>           <property>                   <name>dfs.namenode.name.dir</name>                   <value>file:///home/briup/.bigdata/hadoop/data/nn</value>                              <name>dfs.datanode.data.dir</name>                   <value>file:///home/briup/.bigdata/hadoop/data/dn</value>           </property>           <property>                   <name>dfs.namenode.checkpoint.dir</name>                   <value>file:///home/briup/.bigdata/hadoop/data/snn</value>           </property>           <property>                   <name>dfs.namenode.checkpoint.edits.dir</name>                   <value>file:///home/briup/.bigdata/hadoop/data/snn</value>           </property>           <property>                   <name>dfs.web.ugi</name>                   <value>briup,briup</value>           </property>           <property>                   <name>fs.permissions.umask-mode</name>                   <value>000</value>           </property>           <property>                   <name>dfs.permissions.enabled</name>                   <value>false</value>           </property>           <property>                   <name>dfs.permissions.superusergroup</name>                   <value>briup</value>           </property>           <property>                   <name>dfs.namenode.safemode.threshold-pct</name>                   <value>0f</value>           </property>   </configuration>   ```<ol start="4"><li><p>修改<code>mapred-site.xml</code>文件</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></code></pre></li></ol><configuration>           <property>                <name>mapreduce.framework.name</name>                   <value>yarn</value>           </property>           <property>                   <name>mapreduce.jobhistory.address</name>                   <value>hadoopPD:10020</value>           </property>           <property>                   <name>mapreduce.jobhistory.webapp.address</name>                   <value>hadoopPD:19888</value>           </property>           <!-- 新增加的配置 -->           <property>                   <name>mapreduce.job.ubertask.enable</name>                   <value>true</value>           </property>   </configuration>   ```<ol start="5"><li><p>修改<code>yarn-site.xml</code>文件</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span></code></pre></li></ol><configuration>           <property>                <name>yarn.resourcemanager.hostname</name>                   <value>hadoopPD</value>        </property>           <property>                   <name>yarn.nodemanager.aux-services</name>                   <value>mapreduce_shuffle</value>           </property>           <property>                   <name>yarn.nodemanager.local-dirs</name>                   <value>file:///home/briup/.bigdata/hadoop/data/nm</value>           </property>           <!-- 新增加的配置 -->           <property>                   <name>yarn.log.server.url</name>                   <value>http://hadoopPD:19888/jobhistory/logs/</value>           </property>           <!--配置日志聚合-->           <property>                   <name>yarn.log-aggregation-enable</name>                   <value>true</value>           </property>           <!--聚合后的日志访问地址-->           <property>                   <name>yarn.web-proxy.address</name>                   <value>hadoopPD:54321</value>           </property>           <!--（-1）代表聚合永远不消失-->           <property>                   <name>yarn.log-aggregation.retain-seconds</name>                   <value>-1</value>           </property>            <!--聚合后的数据存放目录-->           <property>                   <name>yarn.nodemanager.remote-app-log-dir</name>                   <value>/logs</value>           </property>           <property>                   <name>yarn.nodemanager.pmem-check-enabled</name>                   <value>false</value>           </property>           <property>                   <name>yarn.nodemanager.vmem-check-enabled</name>                   <value>false</value>           </property>   </configuration><pre><code></code></pre></li></ol><h3 id="1-2-启动"><a href="#1-2-启动" class="headerlink" title="1.2 启动"></a>1.2 启动</h3><ul><li><p>在<strong>使用之前</strong>先进行<strong>格式化</strong>，但是该操作<strong>只执行一次</strong></p><pre class=" language-shell"><code class="language-shell">hdfs namenode -format</code></pre></li></ul><h4 id="1-2-1-HDFS集群的启动"><a href="#1-2-1-HDFS集群的启动" class="headerlink" title="1.2.1 HDFS集群的启动"></a>1.2.1 HDFS集群的启动</h4><ol><li><p>启动<strong>主节点</strong></p><pre class=" language-shell"><code class="language-shell">hadoop-daemon.sh start namenode</code></pre></li><li><p>启动<strong>从节点</strong></p><pre class=" language-shell"><code class="language-shell">hadoop-daemon.sh start datanode</code></pre></li><li><p>启动<strong>第二名字节点</strong></p><pre class=" language-shell"><code class="language-shell">hadoop-daemon.sh start secondarynamenode</code></pre></li></ol><h4 id="WEB监控页面"><a href="#WEB监控页面" class="headerlink" title="WEB监控页面"></a>WEB监控页面</h4><pre class=" language-http"><code class="language-http"><span class="token header-name keyword">http:</span>//IP:50070</code></pre><h4 id="1-2-2-YARN集群启动"><a href="#1-2-2-YARN集群启动" class="headerlink" title="1.2.2 YARN集群启动"></a>1.2.2 YARN集群启动</h4><ol><li><p>启动<strong>主节点</strong></p><pre class=" language-shell"><code class="language-shell">yarn-daemon.sh start resourcemanager</code></pre></li><li><p>启动<strong>从节点</strong></p><pre class=" language-shell"><code class="language-shell">yarn-daemon.sh start nodemanager</code></pre></li><li><p>启动作业运行<strong>历史日志代理服务器</strong>(只在主节点上执行)</p><pre class=" language-shell"><code class="language-shell">yarn-daemon.sh start proxyserver</code></pre></li><li><p>启动<strong>作业运行历史记录</strong></p><pre class=" language-shell"><code class="language-shell">mr-jobhistory-daemon.sh start historyserver</code></pre></li></ol><h4 id="WEB监控页面-1"><a href="#WEB监控页面-1" class="headerlink" title="WEB监控页面"></a>WEB监控页面</h4><pre class=" language-http"><code class="language-http"><span class="token header-name keyword">http:</span>//IP:8088</code></pre><h4 id="1-2-3-设置ssh免密登录（本机——搭建伪分布式使用此命令）"><a href="#1-2-3-设置ssh免密登录（本机——搭建伪分布式使用此命令）" class="headerlink" title="1.2.3 设置ssh免密登录（本机——搭建伪分布式使用此命令）"></a>1.2.3 设置ssh免密登录（本机——搭建伪分布式使用此命令）</h4><pre class=" language-shell"><code class="language-shell">ssh-keygen -t rsacat ~/id_rsa.pub >> ~/.ssh/authorized_keys</code></pre><h3 id="1-3-停止"><a href="#1-3-停止" class="headerlink" title="1.3 停止"></a>1.3 停止</h3><h4 id="1-3-1-HDFS集群的停止"><a href="#1-3-1-HDFS集群的停止" class="headerlink" title="1.3.1 HDFS集群的停止"></a>1.3.1 HDFS集群的停止</h4><ol><li><p>停止<strong>主节点</strong></p><pre class=" language-shell"><code class="language-shell">hadoop-daemon.sh stop namenode</code></pre></li><li><p>停止<strong>从节点</strong></p><pre class=" language-shell"><code class="language-shell">hadoop-daemon.sh stop datanode</code></pre></li><li><p>停止<strong>第二名字节点</strong></p><pre class=" language-shell"><code class="language-shell">hadoop-daemon.sh stop secondarynamenode</code></pre></li></ol><h4 id="1-3-2-YARN集群停止"><a href="#1-3-2-YARN集群停止" class="headerlink" title="1.3.2 YARN集群停止"></a>1.3.2 YARN集群停止</h4><ol><li><p>停止<strong>主节点</strong></p><pre class=" language-shell"><code class="language-shell">yarn-daemon.sh stop resourcemanager</code></pre></li><li><p>停止<strong>从节点</strong></p><pre class=" language-shell"><code class="language-shell">yarn-daemon.sh stop nodemanager</code></pre></li><li><p>停止作业运行<strong>历史日志代理服务器</strong>(只在主节点上执行)</p><pre class=" language-shell"><code class="language-shell">yarn-daemon.sh stop proxyserver</code></pre></li><li><p>停止<strong>作业运行历史记录</strong></p><pre class=" language-shell"><code class="language-shell">mr-jobhistory-daemon.sh stop historyserver</code></pre></li></ol><h2 id="2-全分布Hadoop集群"><a href="#2-全分布Hadoop集群" class="headerlink" title="2.全分布Hadoop集群"></a>2.全分布Hadoop集群</h2><blockquote><p>有多个计算机节点，主节点和从节点的服务器启动在不同的计算机节点上</p></blockquote><h3 id="2-1-搭建"><a href="#2-1-搭建" class="headerlink" title="2.1 搭建"></a>2.1 搭建</h3><ol><li><p>在 <strong>Hadoop</strong> 的集群中，每个节点的配置都一模一样（可以参照伪分布的配置）</p></li><li><p>在 <strong>Hadoop</strong> 安装目录下的 <code>etc/hadoop</code> 目录中的 <code>slaves</code> 文件中填写所有从节点的 <strong>IP</strong> 地址或者主机名</p><pre class=" language-shell"><code class="language-shell">hadoop102hadoop103</code></pre></li><li><p>将<strong>hadoop101</strong> <code>/opt/softwares/hadoop-2.10.0</code> 拷贝到 <strong>hadoop102、hadoop103</strong></p><pre class=" language-shell"><code class="language-shell">scp -r /opt/softwares/hadoop-2.10.0 briup@hadoop102:/opt/softwares/scp -r /opt/softwares/hadoop-2.10.0 briup@hadoop103:/opt/softwares/</code></pre></li><li><p>分别建立软链接，配置环境变量</p></li></ol><h3 id="2-2-启动"><a href="#2-2-启动" class="headerlink" title="2.2 启动"></a>2.2 启动</h3><ol><li><p>在使用之前（第一次启动前）先进行格式化，但是该操作<strong>只执行一次</strong></p><pre class=" language-shell"><code class="language-shell">hdfs namenode -format</code></pre></li><li><p>一键启动（只能在主节点执行）</p><pre class=" language-shell"><code class="language-shell"># HDFS集群    start-dfs.sh    stop-hdfs.sh# YARN集群    start-yarn.sh    stop-yarn.sh# HDFS和YARN集群    start-all.sh# mapreduce 运行历史日志服务器        mr-jobhistory-daemon.sh start historyserver    </code></pre></li><li><p>在 <strong>hadoop101</strong> ，启动<strong>主节点</strong></p><pre class=" language-shell"><code class="language-shell"># 启动/停止主节点# HDFS集群    hadoop-daemon.sh start/stop namenode# YARN集群    yarn-daemon.sh start/stop resourcemanager# mapreduce 运行历史日志服务器        mr-jobhistory-daemon.sh start historyserver</code></pre></li><li><p>在 <strong>hadoop102、hadoop103</strong> ，启动<strong>从节点</strong></p><pre class=" language-shell"><code class="language-shell"># 启动/停止从节点# HDFS集群    hadoop-daemon.sh start/stop datanode# YARN集群    yarn-daemon.sh start/stop nodemanager</code></pre></li></ol><h3 id="2-3-WEB监控页面"><a href="#2-3-WEB监控页面" class="headerlink" title="2.3 WEB监控页面"></a>2.3 WEB监控页面</h3><pre class=" language-shell"><code class="language-shell"># HDFS集群    http://hadoop101:50070# YARN集群    http://hadoop101:8088</code></pre><h1 id="七、Ubuntu20下安装Mysql数据库"><a href="#七、Ubuntu20下安装Mysql数据库" class="headerlink" title="七、Ubuntu20下安装Mysql数据库"></a>七、Ubuntu20下安装Mysql数据库</h1><h2 id="1-安装默认版本"><a href="#1-安装默认版本" class="headerlink" title="1.安装默认版本"></a>1.安装默认版本</h2><pre class=" language-shell"><code class="language-shell"># 更新软件源sudo apt-get update# 安装mysqlsudo apt-get install mysql-server</code></pre><h2 id="2-确认安装是否成功"><a href="#2-确认安装是否成功" class="headerlink" title="2.确认安装是否成功"></a>2.确认安装是否成功</h2><pre class=" language-shell"><code class="language-shell">service mysql status</code></pre><ul><li><h4 id="出现图片中内容说明安装成功，退出命令Ctrl-C"><a href="#出现图片中内容说明安装成功，退出命令Ctrl-C" class="headerlink" title="出现图片中内容说明安装成功，退出命令Ctrl+C"></a>出现图片中内容说明安装成功，退出命令<code>Ctrl+C</code></h4></li></ul><h2 id="3-查询当前使用的mysql版本"><a href="#3-查询当前使用的mysql版本" class="headerlink" title="3.查询当前使用的mysql版本"></a>3.查询当前使用的mysql版本</h2><pre class=" language-shell"><code class="language-shell">mysql --versionmysql -V</code></pre><h2 id="4-mysql基本使用"><a href="#4-mysql基本使用" class="headerlink" title="4.mysql基本使用"></a>4.mysql基本使用</h2><h3 id="4-1-启动mysql服务器"><a href="#4-1-启动mysql服务器" class="headerlink" title="4.1 启动mysql服务器"></a>4.1 启动mysql服务器</h3><pre class=" language-shell"><code class="language-shell"># 使用mysql默认安装，安装完成就启动了mysql# 手动启动service mysql start</code></pre><h3 id="4-2-确认mysql是否启动成功"><a href="#4-2-确认mysql是否启动成功" class="headerlink" title="4.2 确认mysql是否启动成功"></a>4.2 确认mysql是否启动成功</h3><pre class=" language-shell"><code class="language-shell">sudo netstat -tap | grep mysql# 节点处于 LISTEN 状态表示启动成功</code></pre><h3 id="4-3-进入mysql-shell界面"><a href="#4-3-进入mysql-shell界面" class="headerlink" title="4.3 进入mysql shell界面"></a>4.3 进入mysql shell界面</h3><h4 id="4-3-1-如果安装过程中设置了密码"><a href="#4-3-1-如果安装过程中设置了密码" class="headerlink" title="4.3.1 如果安装过程中设置了密码"></a>4.3.1 如果安装过程中设置了密码</h4><pre class=" language-shell"><code class="language-shell">-- 方式一mysql -u root -p-- 出现 Enter password: 后输入密码briup-- 方式二mysql -u root -pbriup-- 密码与-p之间不能有空格--  -u 后面跟连接的数据库用户--  -p 后面跟密码-- 命令结束符 “;” 或者 “/g”mysql -h 127.0.0.1 -P 3306 -u root -pbriup mytest    -h 指定地址    -P（大写）指定端口号    -u 后面是用户名    -p（小写）后面是密码（-p和密码之间不能空格，不然就会理解为密码第一位是空格）    mytest 选择使用的数据库</code></pre><h4 id="4-3-2-如果安装过程中未提示设置密码"><a href="#4-3-2-如果安装过程中未提示设置密码" class="headerlink" title="4.3.2 如果安装过程中未提示设置密码"></a>4.3.2 如果安装过程中未提示设置密码</h4><pre class=" language-shell"><code class="language-shell">mysql -u root</code></pre><h4 id="4-3-3-密码查询及更改"><a href="#4-3-3-密码查询及更改" class="headerlink" title="4.3.3 密码查询及更改"></a>4.3.3 密码查询及更改</h4><pre class=" language-shell"><code class="language-shell">sudo cat /etc/mysql/debian.cnf</code></pre><pre class=" language-shell"><code class="language-shell">mysql -u debian-sys-maint -p# 会提示输入密码# 此处需要输入的密码是上面红框中框中的密码</code></pre><pre class=" language-shell"><code class="language-shell"># 修改密码# 8.04版本alter user 'root'@'localhost' identified with mysql_native_password by 'root';# 8.04之前版本SET PASSWORD=PASSWORD(’[修改的密码]’)# 或update user set password=password(‘123456’) where user=‘root’;</code></pre><h4 id="4-3-4-设置任意IP访问数据库"><a href="#4-3-4-设置任意IP访问数据库" class="headerlink" title="4.3.4 设置任意IP访问数据库"></a>4.3.4 设置任意IP访问数据库</h4><pre class=" language-mysql"><code class="language-mysql">mysql> use mysql; mysql> update user set host = '%' where user = 'root'; mysql> select host, user from user; mysql> flush privileges;</code></pre><pre class=" language-mysql"><code class="language-mysql"># 1.修改Ubuntu中MySQL的配置文件；sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf        port                    = 8021        character-set-server    = UTF8        bind-address            = 0.0.0.0sudo service mysql restart# 2.修改Ubuntu中MySQL的用户表中存储的root的用户信息，让其允许远程登录；mysql -u root -pmysql> update mysql.user set host='%' where user='root';mysql> flush privileges;</code></pre><h1 id="八、flume的安装与配置"><a href="#八、flume的安装与配置" class="headerlink" title="八、flume的安装与配置"></a>八、flume的安装与配置</h1><h2 id="1-flume-的安装"><a href="#1-flume-的安装" class="headerlink" title="1. flume 的安装"></a>1. flume 的安装</h2><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf apache-flume-1.9.0-bin.tar.gz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/apache-flume-1.9.0-bin /opt/links/flume</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__FLUME_CONF__####</span><span class="token function">export</span> FLUME_HOME<span class="token operator">=</span>/opt/links/flume<span class="token function">export</span> CLASSPATH<span class="token operator">=</span>.:<span class="token variable">${FLUME_HOME}</span>/lib<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${FLUME_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>将 <code>flume/conf</code> 下的 <code>flume-env.sh.template</code> 文件修改为 <code>flume-env.sh</code>，并配置 <code>flume-env.sh</code> 文件</p><pre class=" language-sh"><code class="language-sh">cp flume-env.sh.template flume-env.shvim flume-env.sh#修改内容export JAVA_HOME=/opt/links/jdk</code></pre></li><li><p>验证Flume是否安装成功</p><pre class=" language-shell"><code class="language-shell">flume-ng version</code></pre></li><li><p>启动服务端</p><pre class=" language-shell"><code class="language-shell">flume-ng agent --conf conf/ --conf-file job/netcat-flume-logger.conf --name a1 -Dflume.root.logger=INFO,consoleflume-ng agent -c conf/ -f job/netcat-flume-logger.conf -n a1 -Dflume.root.logger=INFO,console</code></pre></li><li><p>客户端连接</p><pre class=" language-shell"><code class="language-shell">nc localhost 44444</code></pre></li></ol><blockquote><p>Flume 只有单机模式，没有集群模式</p></blockquote><h2 id="2-flume-监测端口"><a href="#2-flume-监测端口" class="headerlink" title="2. flume 监测端口"></a>2. flume 监测端口</h2><pre class=" language-shell"><code class="language-shell"># example.conf: A single-node Flume configuration# Name the components on this agenta1.sources = r1a1.sinks = k1a1.channels = c1# Describe/configure the sourcea1.sources.r1.type = netcata1.sources.r1.bind = localhosta1.sources.r1.port = 44444# Describe the sinka1.sinks.k1.type = logger# Use a channel which buffers events in memorya1.channels.c1.type = memorya1.channels.c1.capacity = 1000a1.channels.c1.transactionCapacity = 100# Bind the source and sink to the channela1.sources.r1.channels = c1a1.sinks.k1.channel = c1</code></pre><h1 id="九、Zookeeper的安装与配置"><a href="#九、Zookeeper的安装与配置" class="headerlink" title="九、Zookeeper的安装与配置"></a>九、Zookeeper的安装与配置</h1><h2 id="1-单机模式Zookeeper"><a href="#1-单机模式Zookeeper" class="headerlink" title="1.单机模式Zookeeper"></a>1.单机模式Zookeeper</h2><h3 id="1-1-搭建-1"><a href="#1-1-搭建-1" class="headerlink" title="1.1 搭建"></a>1.1 搭建</h3><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf apache-zookeeper-3.6.2-bin.tar.gz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/apache-zookeeper-3.6.2-bin /opt/links/zookeeper</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__ZOOKEEPER_CONF__####</span><span class="token function">export</span> ZOOKEEPER_HOME<span class="token operator">=</span>/opt/links/zookeeper<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${ZOOKEEPER_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>修改 <code>/opt/links/zookeeper/conf</code>下的配置文件</p><ol><li><p>将<code>zoo_sample.cfg</code>重命名为<code>zoo.cfg</code>，编辑<code>zoo.cfg</code>文件:</p><pre class=" language-shell"><code class="language-shell">#在 /opt/links/zookeeper/conf 目录下操作cp zoo_sample.cfg zoo.cfgvim zoo.cfg</code></pre></li><li><p>在<code>zoo.cfg</code>中添加下面两行</p><pre class=" language-shell"><code class="language-shell">dataDir=/home/briup/.bigdata/zookeeper/datadataLogDir=/home/briup/.bigdata/zookeeper/log</code></pre></li></ol></li></ol><h3 id="1-2-启动-1"><a href="#1-2-启动-1" class="headerlink" title="1.2 启动"></a>1.2 启动</h3><ol><li><p>启动ZK服务器端</p><pre class=" language-shell"><code class="language-shell">   zkServer.sh start</code></pre><ol start="2"><li>查看ZK的状态</li></ol><pre class=" language-shell"><code class="language-shell">   zkServer.sh status</code></pre><ol start="3"><li><p>检查ZK服务器有没有启动成功的方法（三种）</p></li><li><pre class=" language-shell"><code class="language-shell">   zkServer.sh status</code></pre><ol start="2"><li>使用jps命令查看，如果有<code>QuorumPeerMain</code>进程说明启动成功，反之没有正常启动</li></ol></li><li><p>使用课件提供的“服务器检查命令”检查</p><pre class=" language-shell"><code class="language-shell">   telnet ud2 2818</code></pre></li><li><p>使用ZK的客户端连接ZK服务器端</p></li></ol><pre class=" language-shell"><code class="language-shell">   zkCli.sh -server 部署ZKS的IP[:2181]   # 退出   quit</code></pre></li></ol><h2 id="2-全分布式Zookeeper"><a href="#2-全分布式Zookeeper" class="headerlink" title="2. 全分布式Zookeeper"></a>2. 全分布式Zookeeper</h2><h3 id="2-1-搭建-1"><a href="#2-1-搭建-1" class="headerlink" title="2.1 搭建"></a>2.1 搭建</h3><ol><li><p>搭建基本和单机模式一致，只需在<code>zoo.cfg</code>中额外添加</p><pre class=" language-shell"><code class="language-shell">####_cluster_####server.1=hadoop101:2888:3888server.2=hadoop102:2888:3888server.3=hadoop103:2888:3888</code></pre></li><li><p>将<strong>hadoop101</strong> <code>/opt/softwares/apache-zookeeper-3.6.2-bin</code> 拷贝到 <strong>hadoop102、hadoop103</strong></p><pre class=" language-shell"><code class="language-shell">scp -r /opt/softwares/apache-zookeeper-3.6.2-bin briup@hadoop102:/opt/softwares/scp -r /opt/softwares/apache-zookeeper-3.6.2-bin briup@hadoop103:/opt/softwares/</code></pre></li></ol><ol start="3"><li><p>分别在 <code>/home/briup/.bigdata/zookeeper/data</code> 路径中创建 <code>myid</code> 文件，并且写入对应编号</p><pre class=" language-shell"><code class="language-shell">touch myidvim myidhadoop101    中的    myid    文件写入    1hadoop102    中的    myid    文件写入    2hadoop102    中的    myid    文件写入    3</code></pre></li></ol><h1 id="十、Kafka的安装与配置"><a href="#十、Kafka的安装与配置" class="headerlink" title="十、Kafka的安装与配置"></a>十、Kafka的安装与配置</h1><h2 id="1-单机模式Kafka"><a href="#1-单机模式Kafka" class="headerlink" title="1. 单机模式Kafka"></a>1. 单机模式Kafka</h2><h3 id="1-1-搭建-2"><a href="#1-1-搭建-2" class="headerlink" title="1.1 搭建"></a>1.1 搭建</h3><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf kafka_2.13-2.6.0.tgz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/kafka_2.13-2.6.0/ /opt/links/kafka</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__KAFKA_CONF__####</span><span class="token function">export</span> KAFKA_HOME<span class="token operator">=</span>/opt/links/kafka<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${KAFKA_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>修改 <code>/opt/links/kafka/config</code> 配置文件</p><ol><li><p>编辑 <code>server.properties </code> 文件</p><pre class=" language-shell"><code class="language-shell">vim server.properties --修改内容log.dirs=/home/briup/.bigdata/kafka/logs</code></pre></li></ol></li></ol><h3 id="1-2-启动-2"><a href="#1-2-启动-2" class="headerlink" title="1.2 启动"></a>1.2 启动</h3><ol><li><p>启动 <strong>ZK</strong></p><pre class=" language-shell"><code class="language-shell">zkServer.sh start</code></pre></li><li><p>启动 <strong>Kafka</strong> （需要指定Kafka的配置文件——<code>server.properties</code>）</p><pre class=" language-shell"><code class="language-shell">kafka-server-start.sh [-daemon] /opt/links/kafka/config/server.properties以后台运行形式启动    -daemon</code></pre></li><li><p>使用 <code>jps</code> 命令查看Kafka是否启动成功。</p></li></ol><h3 id="1-3-关闭"><a href="#1-3-关闭" class="headerlink" title="1.3 关闭"></a>1.3 关闭</h3><ol><li><p>关闭 <strong>ZK</strong></p><pre class=" language-shell"><code class="language-shell">zkServer.sh stop</code></pre></li><li><p>关闭 <strong>Kafka</strong></p><pre class=" language-shell"><code class="language-shell">kafka-server-stop.sh stop</code></pre></li></ol><h2 id="2-全分布式Kafka"><a href="#2-全分布式Kafka" class="headerlink" title="2. 全分布式Kafka"></a>2. 全分布式Kafka</h2><h1 id="十一、Hbase的安装与配置"><a href="#十一、Hbase的安装与配置" class="headerlink" title="十一、Hbase的安装与配置"></a>十一、Hbase的安装与配置</h1><h2 id="1-单机模式"><a href="#1-单机模式" class="headerlink" title="1. 单机模式"></a>1. 单机模式</h2><h2 id="2-伪分布模式"><a href="#2-伪分布模式" class="headerlink" title="2. 伪分布模式"></a>2. 伪分布模式</h2><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf hbase-2.3.2-bin.tar.gz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/hbase-2.3.2/ /opt/links/hbase</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__HBASE_CONF__####</span><span class="token function">export</span> HBASE_HOME<span class="token operator">=</span>/opt/links/hbase<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${HBASE_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>查看是否安装成功</p><pre class=" language-shell"><code class="language-shell">hbase version</code></pre></li><li><p>在 <code>/opt/links/hbase/conf</code> 文件夹下配置相关文件</p><ul><li><p>Linux中 <code>vim</code> 编辑显示、隐藏行号</p><pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 显示行号</span>    <span class="token operator">:</span>set number    <span class="token operator">:</span>set nu<span class="token comment" spellcheck="true">// 隐藏行号</span>    <span class="token operator">:</span>set nu<span class="token operator">!</span></code></pre></li></ul></li></ol><ol><li><p>编辑 <code>hbase-env.sh </code> 文件</p><pre class=" language-shell"><code class="language-shell"> vim hbase-env.sh -- 修改内容，将注释去掉后更改 export JAVA_HOME=/opt/links/jdk export HBASE_PID_DIR=/home/briup/.bigdata/hbase/pids export HBASE_MANAGES_ZK=false</code></pre></li></ol><ol start="2"><li><p>编辑 <code>hbase-site.xml</code> 文件</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0"?></span><span class="token prolog">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hbase.rootdir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>hdfs://hadoopPD:9000/hbase<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hbase.zookeeper.quorum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>hadoopPD:2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hbase.superuser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>briup<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hbase.cluster.distributed<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hbase.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>/home/briup/.bigdata/hbase/temp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hbase.unsafe.stream.capability.enforce<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre></li></ol><h2 id="3-全分布模式"><a href="#3-全分布模式" class="headerlink" title="3. 全分布模式"></a>3. 全分布模式</h2><ol><li><blockquote><p>【注意】如果集群之间的节点时间不同步，会导致 <code>regionserver</code> 无法启动，抛出<code>ClockOutOfSyncException</code> 异常</p></blockquote></li></ol><h2 id="4-启动"><a href="#4-启动" class="headerlink" title="4. 启动"></a>4. 启动</h2><ol><li><p>启动主节点</p><pre class=" language-shell"><code class="language-shell">hbase-daemon.sh start master</code></pre></li><li><p>启动从节点</p><pre class=" language-shell"><code class="language-shell">hbase-daemon.sh start regionserver</code></pre></li></ol><h2 id="5-监控页面"><a href="#5-监控页面" class="headerlink" title="5. 监控页面"></a>5. 监控页面</h2><pre class=" language-shell"><code class="language-shell">http://hadooppd:16010</code></pre><ul><li><p>杀死进程</p><pre class=" language-shell"><code class="language-shell">kell -9 进程端口号</code></pre></li></ul><h1 id="十二、Hive的安装与配置"><a href="#十二、Hive的安装与配置" class="headerlink" title="十二、Hive的安装与配置"></a>十二、Hive的安装与配置</h1><h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf apache-hive-3.1.2-bin.tar.gz -C /opt/softwares/mv apache-hive-3.1.2-bin/ hive-3.1.2</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/hive-3.1.2/ /opt/links/hive</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__HIVE_CONF__####</span><span class="token function">export</span> HIVE_HOME<span class="token operator">=</span>/opt/links/hive<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${HIVE_HOME}</span>/bin<span class="token function">alias</span> beeline<span class="token operator">=</span><span class="token string">'beeline --color=true --hiveconf hive.server2.logging.operation.level=NONE'</span></code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>在 <code>/opt/links/hive/conf</code> 文件夹下配置相关文件</p><ol><li><p>批量替换文件名 </p><pre class=" language-shell"><code class="language-shell">sudo apt install renamerename 's/\.template$//' *.template</code></pre></li><li><p>编辑 <code>hive-env.sh</code>文件</p><pre class=" language-sh"><code class="language-sh">HADOOP_HOME=/opt/links/hadoopexport HIVE_CONF_DIR=/opt/links/hive/conf</code></pre></li><li><p>编辑 <code>hive-exec-log4j2.properties</code>和 <code>hive-log4j2.properties</code> 文件</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">property.hive.log.dir</span> <span class="token punctuation">=</span> <span class="token attr-value">/opt/links/hive/logs/${sys:user.name}</span></code></pre></li><li><p>编辑 <code>llap-daemon-log4j2.properties</code>文件</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">property.llap.daemon.log.dir</span> <span class="token punctuation">=</span> <span class="token attr-value">/opt/links/hive/logs/${sys:user.name}</span></code></pre></li><li><p>编辑 <code>llap-cli-log4j2.properties</code> 文件</p><pre class=" language-properties"><code class="language-properties"><span class="token attr-name">property.hive.log.dir</span> <span class="token punctuation">=</span> <span class="token attr-value">/opt/links/hive/logs/${sys:user.name}</span></code></pre></li><li><p>编辑 <code>hive-site.xml</code> 文件</p><pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- 配置hive中的表在hdfs中的存储地址，默认地址 /user/hive/warehouse--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.metastore.warehouse.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>/hive/warehouse<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.metastore.db.type<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionURL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>jdbc:mysql://us1:3306/hive?createDatabaseIfNotExist=true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionDriverName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>com.mysql.cj.jdbc.Driver<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionUserName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>javax.jdo.option.ConnectionPassword<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">></span></span></code></pre></li><li><p>将<strong>mysql</strong>依赖 添加到 <code>opt/links/hive/lib</code> 目录下</p><pre class=" language-shell"><code class="language-shell">mv mysql-connector-java-8.0.16.jar /opt/links/hive/lib</code></pre></li><li><p>在 <code>/opt/links/hive/bin</code> 中 新建文件 <code>start-hive.sh</code></p><pre class=" language-sh"><code class="language-sh">#!/bin/bashnohup hive --service metastore > /dev/null 2>&1 &nohup hive --service hiveserver2 > /dev/null 2>&1 &</code></pre></li><li><p>给 <code>start-hive.sh</code> 赋予执行权限</p><pre class=" language-shell"><code class="language-shell">chmod +x start-hive.sh</code></pre></li><li><p>在 <code>/opt/links/hive/bin</code> 中 新建文件 <code>stop-hive.sh</code></p><pre class=" language-sh"><code class="language-sh">#!/bin/bashps -ef | grep RunJar | awk '{print $2}' | xargs kill -9 > /dev/null 2>&1</code></pre></li><li><p>给 <code>stop-hive.sh</code> 赋予执行权限</p><pre class=" language-shell"><code class="language-shell">chmod +x stop-hive.sh</code></pre></li><li><p><strong>MySQL</strong>中 初始化 <strong>元数据</strong></p><pre class=" language-shell"><code class="language-shell">schematool -dbType mysql -initSchema</code></pre></li><li><p>配置hive支持事务，在<code>/opt/links/hive/bin</code> 下的<code>start-hive.sh</code>文件，添加如下配置</p><pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- hive有关事务的配置  --></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.txn.manager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>org.apache.hadoop.hive.ql.lockmgr.DbTxnManager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.compactor.initiator.on<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.support.concurrency<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.compactor.worker.threads<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.exec.dynamic.partition.mode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>nonstrict<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- 设置在Web页面中查看某个操作执行过程  --></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>hive.log.explain.output<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span></code></pre></li></ol></li></ol><h2 id="2-启动"><a href="#2-启动" class="headerlink" title="2. 启动"></a>2. 启动</h2><ol><li><p>启动 元数据库 的进程</p><pre class=" language-shell"><code class="language-shell">hive --service metastore# 后台运行nohup hive --service metastore > /dev/null 2>&1 &        # hivemetastore       </code></pre></li><li><p>启动 服务器端</p><pre class=" language-shell"><code class="language-shell">hive --service hiveserver2# 后台运行nohup hive --service hiveserver2 > /dev/null 2>&1 &        #hiveserver2    </code></pre></li><li><p>使用客户端连接</p><pre class=" language-shell"><code class="language-shell">beeline -u jdbc:hive2://us1:10000# 日志打印到后台beeline -u jdbc:hive2://us1:10000 --color=true --hiveconf hive.server2.logging.operation.level=NONE# 或beeline --color=true --hiveconf hive.server2.logging.operation.level=NONEbeeline> !connect jdbc:hive2://us1:10000# 配置beeline后beeline -u jdbc:hive2://us1:10000 -n briup</code></pre><ol><li><p>安装 <code>net-tools</code></p><pre class=" language-shell"><code class="language-shell">sudo apt install net-tools</code></pre></li><li><p>监控端口</p><pre class=" language-shell"><code class="language-shell">netstat -anop</code></pre></li></ol></li><li><p>退出客户端</p><pre class=" language-shell"><code class="language-shell">!exit</code></pre></li></ol><h2 id="3-监控页面"><a href="#3-监控页面" class="headerlink" title="3. 监控页面"></a>3. 监控页面</h2><pre class=" language-shell"><code class="language-shell">us1:10002</code></pre><h1 id="十三、ant安装与配置"><a href="#十三、ant安装与配置" class="headerlink" title="十三、ant安装与配置"></a>十三、ant安装与配置</h1><h2 id="1-安装-1"><a href="#1-安装-1" class="headerlink" title="1. 安装"></a>1. 安装</h2><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar zxvf apache-ant-1.10.9-bin.tar.gz -C /opt/softwares/mv apache-ant-1.10.9/ ant-1.10.9</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/ant-1.10.9/ /opt/links/ant</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__ANT_CONF__####</span><span class="token function">export</span> ANT_HOME<span class="token operator">=</span>/opt/links/ant<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${ANT_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>查看是否安装成功</p><pre class=" language-shell"><code class="language-shell">ant -version</code></pre></li></ol><h1 id="十四、配置Scala"><a href="#十四、配置Scala" class="headerlink" title="十四、配置Scala"></a>十四、配置Scala</h1><ol><li><p>解压JDK的安装包到/opt/softwares目录中</p><pre class=" language-shell"><code class="language-shell">tar zxvf scala-2.12.10.tgz -C /opt/softwares/</code></pre></li><li><p>创建JDK安装路径的软链接到<code>/opt/links</code>目录中</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/scala-2.12.10/ /opt/links/scala</code></pre></li><li><p>配置环境变量</p><ol><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>添加以下内容</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__SCALA_CONF__####</span><span class="token function">export</span> SCALA_HOME<span class="token operator">=</span>/opt/links/scala<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${SCALA_HOME}</span>/bin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li></ol></li><li><p>将<strong>hadoop101</strong> <code>/opt/softwares/scala-2.12.10</code> 拷贝到 <strong>hadoop102、hadoop103</strong></p><pre class=" language-shell"><code class="language-shell">scp -r /opt/softwares/scala-2.12.10 briup@hadoop102:/opt/softwares/scp -r /opt/softwares/scala-2.12.10 briup@hadoop103:/opt/softwares/</code></pre></li><li><p>分别建立软链接，配置环境变量</p></li></ol><h1 id="十五、Spark安装与配置"><a href="#十五、Spark安装与配置" class="headerlink" title="十五、Spark安装与配置"></a>十五、Spark安装与配置</h1><h2 id="1-单机模式（本地模式）"><a href="#1-单机模式（本地模式）" class="headerlink" title="1.单机模式（本地模式）"></a>1.单机模式（本地模式）</h2><h3 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1 安装"></a>1.1 安装</h3><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar -zxvf spark-3.0.1-bin-hadoop2.7.tgz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/spark-3.0.1-bin-hadoop2.7/ /opt/links/spark</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__SPARK_CONF__####</span><span class="token function">export</span> SPARK_HOME<span class="token operator">=</span>/opt/links/spark<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${SPARK_HOME}</span>/bin:<span class="token variable">${SPARK_HOME}</span>/sbin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>查看是否配置成功</p><pre class=" language-shell"><code class="language-shell">spark-shell --version</code></pre></li></ol><h3 id="1-2-客户端连接（进入本地模式）"><a href="#1-2-客户端连接（进入本地模式）" class="headerlink" title="1.2 客户端连接（进入本地模式）"></a>1.2 客户端连接（进入本地模式）</h3><pre class=" language-shell"><code class="language-shell"># 默认不写或 [*] ， 代表使用本地能用的所有的CPU核数spark-shell --master localspark-shell --master local[*]# 使用本地多少CPU核数spark-shell --master local[2]# 退出命令行:quit</code></pre><h3 id="1-3-简单使用"><a href="#1-3-简单使用" class="headerlink" title="1.3 简单使用"></a>1.3 简单使用</h3><pre class=" language-scala"><code class="language-scala"><span class="token comment" spellcheck="true">// 在 scala> 命令行使用</span><span class="token keyword">val</span> file <span class="token operator">=</span> sc<span class="token punctuation">.</span>textFile<span class="token punctuation">(</span><span class="token string">"file:///etc/passwd"</span><span class="token punctuation">)</span><span class="token keyword">val</span> rdd1 <span class="token operator">=</span> file<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">val</span> rdd2 <span class="token operator">=</span> rdd1<span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">val</span> res <span class="token operator">=</span> rdd2<span class="token punctuation">.</span>reduceByKey<span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 打印结果（行动操作）</span>res<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// 词频统计</span><span class="token comment" spellcheck="true">// 整理为一行</span>sc<span class="token punctuation">.</span>textFile<span class="token punctuation">(</span><span class="token string">"file:///etc/passwd"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>_<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reduceByKey<span class="token punctuation">(</span>_<span class="token operator">+</span>_<span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span><span class="token keyword">val</span> file <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>textFile<span class="token punctuation">(</span><span class="token string">"file:///etc/passwd"</span><span class="token punctuation">)</span><span class="token keyword">val</span> res <span class="token operator">=</span> file<span class="token punctuation">.</span>flatMap<span class="token punctuation">(</span>line <span class="token keyword">=></span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>groupByKey<span class="token punctuation">(</span>identity<span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>res<span class="token punctuation">.</span>show</code></pre><h2 id="2-伪分布式"><a href="#2-伪分布式" class="headerlink" title="2. 伪分布式"></a>2. 伪分布式</h2><h3 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 安装</h3><ol><li><p>解压</p><pre class=" language-shell"><code class="language-shell">tar -zxvf spark-3.0.1-bin-hadoop2.7.tgz -C /opt/softwares/</code></pre></li><li><p>创建软链接</p><pre class=" language-shell"><code class="language-shell">ln -sf /opt/softwares/spark-3.0.1-bin-hadoop2.7/ /opt/links/spark</code></pre></li><li><p>编辑文件    <code>~/.bashrc</code></p><pre class=" language-shell"><code class="language-shell">vim  ~/.bashrc</code></pre></li><li><p>配置环境变量</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">####__SPARK_CONF__####</span><span class="token function">export</span> SPARK_HOME<span class="token operator">=</span>/opt/links/spark<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">${SPARK_HOME}</span>/bin:<span class="token variable">${SPARK_HOME}</span>/sbin</code></pre></li><li><p>执行以下命令使之生效</p><pre class=" language-shell"><code class="language-shell">source ~/.bashrc</code></pre></li><li><p>查看是否配置成功</p><pre class=" language-shell"><code class="language-shell">spark-shell --version</code></pre></li><li><p>在 <code>/opt/links/spark/conf</code> 文件夹下配置相关文件</p><ol><li><p>批量替换文件名 </p><pre class=" language-shell"><code class="language-shell">sudo apt install renamerename 's/\.template$//' *.template</code></pre></li><li><p>编辑 <code>spark-defaults.conf</code>文件</p><pre><code>spark.master                     spark://us1:7077spark.eventLog.enabled           truespark.eventLog.dir               hdfs://us1:9000/spark/logsspark.serializer                 org.apache.spark.serializer.KryoSerializerspark.driver.memory              1gspark.executor.extraJavaOptions  -XX:+PrintGCDetailsspark.yarn.jars                 hdfs://us1:9000/spark/jars/*</code></pre></li></ol></li></ol><ol start="3"><li><p>编辑 <code>spark-env.sh</code>文件，添加如下内容</p><pre class=" language-sh"><code class="language-sh">export JAVA_HOME=/opt/links/jdkexport HADOOP_CONF_DIR=/opt/links/hadoop/etc/hadoopexport SPARK_MASTER_HOST=us1export SPARK_MASTER_PORT=7077export SPARK_MASTER_WEBUI_PORT=9090export SPARK_WORKER_WEBUI_PORT=9091export SPARK_LOCAL_DIRS=/home/briup/.bigdata/spark/dataexport SPARK_EXECUTOR_MEMORY=512Mexport SPARK_DRIVER_MEMORY=512Mexport SPARK_WORKER_INSTANCES=2export SPARK_WORKER_MEMORY=512M</code></pre></li><li><p>编辑 <code>slaves</code>文件</p><pre class=" language-shell"><code class="language-shell"># 配置主机名us1</code></pre></li><li><p>在家目录下创建一个文件夹<code>.bigdata/spark/data</code></p><pre class=" language-sh"><code class="language-sh">mkdir -p home/briup/.bigdata/spark/data</code></pre></li><li><p>在<strong>HDFS</strong>集群上创建目录<code>/spark/logs</code>和<code>/spark/jars</code></p><pre class=" language-sh"><code class="language-sh">hdfs dfs -mkdir -p /spark/logshdfs dfs -mkdir -p /spark/jars</code></pre></li><li><p>将<strong>spark</strong>中的<strong>jar</strong>包都上传到<strong>hdfs</strong>中的<code>/spark/jars</code>目录下</p><pre class=" language-shell"><code class="language-shell">hdfs dfs -put /opt/links/spark/jars/* /spark/jars</code></pre></li><li><p>由于spark启动命令也为 <code>start-all.sh</code> ， 所以我们重命名为 <code>start-spark.sh</code></p><pre class=" language-sh"><code class="language-sh">cp -r ./start-all.sh ./start-spark.sh</code></pre></li><li><p>由于spark启动命令也为 <code>stop-all.sh</code> ， 所以我们重命名为 <code>stop-spark.sh</code></p><pre class=" language-sh"><code class="language-sh">cp -r ./stop-all.sh ./stop-spark.sh</code></pre></li></ol><h3 id="2-2-启动-1"><a href="#2-2-启动-1" class="headerlink" title="2.2 启动"></a>2.2 启动</h3><pre class=" language-shell"><code class="language-shell"># 先启动hadoop的相关集群# 后启动sparkstart-spark.sh</code></pre><h3 id="2-3-监控页面"><a href="#2-3-监控页面" class="headerlink" title="2.3 监控页面"></a>2.3 监控页面</h3><pre class=" language-shell"><code class="language-shell"># 此访问端口是在 spark-env.sh 文件中自己配置的，默认端口 8080us1:9090</code></pre><h3 id="2-4-客户端连接（进入独立集群模式）"><a href="#2-4-客户端连接（进入独立集群模式）" class="headerlink" title="2.4 客户端连接（进入独立集群模式）"></a>2.4 客户端连接（进入独立集群模式）</h3><pre class=" language-sh"><code class="language-sh">spark-shell --master spark://us1:7077# 退出命令行:quit</code></pre><h2 id="3-全分布式"><a href="#3-全分布式" class="headerlink" title="3. 全分布式"></a>3. 全分布式</h2><h3 id="3-1-搭建"><a href="#3-1-搭建" class="headerlink" title="3.1 搭建"></a>3.1 搭建</h3><ol><li><p>在 <strong>Spark</strong> 的集群中，每个节点的配置都一模一样（可以参照伪分布的配置）</p></li><li><p>在 <strong>Spark</strong> 安装目录下的 <code>etc/hadoop</code> 目录中的 <code>slaves</code> 文件中填写所有从节点的 <strong>IP</strong> 地址或者主机名</p><pre class=" language-shell"><code class="language-shell">hadoop102hadoop103</code></pre></li><li><p>将<strong>hadoop101</strong> <code>/opt/softwares/hadoop-2.10.0</code> 拷贝到 <strong>hadoop102、hadoop103</strong></p><pre class=" language-shell"><code class="language-shell">scp -r /opt/softwares/spark-3.0.1-bin-hadoop2.7/ briup@hadoop102:/opt/softwares/scp -r /opt/softwares/spark-3.0.1-bin-hadoop2.7/ briup@hadoop103:/opt/softwares/</code></pre></li><li><p>分别建立软链接，配置环境变量</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux 应用安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vagrant 操作虚拟机</title>
      <link href="2020/06/05/linux/vagrant-cao-zuo-xu-ni-ji-ming-ling/"/>
      <url>2020/06/05/linux/vagrant-cao-zuo-xu-ni-ji-ming-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="Vagrant-操作虚拟机"><a href="#Vagrant-操作虚拟机" class="headerlink" title="Vagrant 操作虚拟机"></a>Vagrant 操作虚拟机</h1><h2 id="1-安装-Centos7"><a href="#1-安装-Centos7" class="headerlink" title="1. 安装 Centos7"></a>1. 安装 Centos7</h2><pre class=" language-shell"><code class="language-shell">#选择盘符E:#创建目录vagrantmkdir vagrant#进入目录cd vagrant#创建目录centos7mkdir centos7#进入目录cd centos7#创建centos7的`Vagrantfile`文件vagrant init centos/7# 安装虚拟机vagrant up# 由于下载速度慢，可以在迅雷下载https://cloud.centos.org/centos/7/vagrant/x86_64/images/CentOS-7-x86_64-Vagrant-1804_02.VirtualBox.box#添加镜像vagrant box add centos7 ./CentOS-7-x86_64-Vagrant-1804_02.VirtualBox.box#添加关联vagrant up#启动vagrant up#重启vagrant reload [vm-name]#关机vagrant halt [vm-name]#销毁虚拟机vagrant destroy [vm-name]#ssh登录虚拟机vagrant ssh [vm-name]</code></pre><h2 id="2-连接虚拟机"><a href="#2-连接虚拟机" class="headerlink" title="2.连接虚拟机"></a>2.连接虚拟机</h2><pre class=" language-shell"><code class="language-shell">vagrant ssh# 查看当前登录用户whoami# 查询IPip addr</code></pre><h2 id="3-安装-Docker"><a href="#3-安装-Docker" class="headerlink" title="3.安装 Docker"></a>3.安装 Docker</h2><p>概念：虚拟化容器技术。Docker基于镜像，可以秒级启动各种容器。每一种容器都是一个完整的运行环境，容器之间互相隔离。<a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p><h3 id="1-安装"><a href="#1-安装" class="headerlink" title="1.安装"></a>1.安装</h3><pre class=" language-shell"><code class="language-shell">$ sudo yum install -y yum-utils$ sudo yum-config-manager \    --add-repo \    https://download.docker.com/linux/centos/docker-ce.repo$ sudo yum install docker-ce docker-ce-cli containerd.io</code></pre><h3 id="2-启动-服务"><a href="#2-启动-服务" class="headerlink" title="2.启动 服务"></a>2.启动 服务</h3><pre class=" language-shell"><code class="language-shell">$ sudo systemctl start docker# 参看版本$ docker -v# 检查当前虚拟机下载的镜像$ sudo docker images</code></pre><h3 id="3-设置开机自启动"><a href="#3-设置开机自启动" class="headerlink" title="3.设置开机自启动"></a>3.设置开机自启动</h3><pre class=" language-shell"><code class="language-shell">$ sudo systemctl enable docker</code></pre><h3 id="4-配置镜像加速-阿里云——容器镜像服务"><a href="#4-配置镜像加速-阿里云——容器镜像服务" class="headerlink" title="4.配置镜像加速(阿里云——容器镜像服务)"></a>4.配置镜像加速(阿里云——容器镜像服务)</h3><pre class=" language-shell"><code class="language-shell">$ sudo mkdir -p /etc/docker$ sudo tee /etc/docker/daemon.json <<-'EOF'{  "registry-mirrors": ["https://dki9604n.mirror.aliyuncs.com"]}EOF$ sudo systemctl daemon-reload$ sudo systemctl restart docker</code></pre><h2 id="4-安装-Mysql"><a href="#4-安装-Mysql" class="headerlink" title="4.安装 Mysql"></a>4.安装 Mysql</h2><pre class=" language-shell"><code class="language-shell">$  sudo docker pull mysql:5.7# 检查当前虚拟机下载的镜像$ sudo docker images# 查看Docker正在运行的容器$ sudo docker ps</code></pre><h3 id="1-启动"><a href="#1-启动" class="headerlink" title="1.启动"></a>1.启动</h3><pre class=" language-shell"><code class="language-shell">docker run -p 3306:3306 --name mysql \-v /mydata/mysql/log:/var/log/mysql \-v /mydata/mysql/data:/var/lib/mysql \-v /mydata/mysql/conf:/etc/mysql \-e MYSQL_ROOT_PASSWORD=root \-d mysql:5.7# -p 端口映射 将MySQL容器中的3306端口映射到Linux中的3306端口# --name 给当前容器命名 mysql# -v 目录挂载 相当于将MySQL容器内部目录做 软链接 链接到Linux中</code></pre><h3 id="2-进入容器"><a href="#2-进入容器" class="headerlink" title="2.进入容器"></a>2.进入容器</h3><pre class=" language-shell"><code class="language-shell"># 交互模式 进入docker exec -it mysql /bin/bash# 查看Mysql的安装位置whereis mysql# 退出容器exit</code></pre><h3 id="3-配置Mysql"><a href="#3-配置Mysql" class="headerlink" title="3.配置Mysql"></a>3.配置Mysql</h3><pre class=" language-shell"><code class="language-shell">$ vi my.cnf[client]default-character-set=utf8[mysql]default-character-set=utf8[mysqlid]init_connect='SET collation_connection = utf8_unicode_ci'init_connect='SET NAMES utf8'character-set-server=utf8collation-server=utf8_unicode_ciskip-character-set-client-handshakeskip-name-resolve</code></pre><h3 id="4-重启mysql容器"><a href="#4-重启mysql容器" class="headerlink" title="4.重启mysql容器"></a>4.重启mysql容器</h3><pre class=" language-shell"><code class="language-shell"># 查看Docker正在运行的容器$ sudo docker ps# 重启$ sudo docker restart mysql# 设置自动启动$ sudo docker update mysql --restart=always</code></pre><h3 id="5-远程连接mysql"><a href="#5-远程连接mysql" class="headerlink" title="5.远程连接mysql"></a>5.远程连接mysql</h3><pre class=" language-shell"><code class="language-shell">mysql -h 192.168.56.10 -uroot -proot</code></pre><h2 id="5-安装Redis"><a href="#5-安装Redis" class="headerlink" title="5.安装Redis"></a>5.安装Redis</h2><pre class=" language-shell"><code class="language-shell">$ sudo docker pull redis</code></pre><h3 id="1-创建实例并启动"><a href="#1-创建实例并启动" class="headerlink" title="1.创建实例并启动"></a>1.创建实例并启动</h3><pre class=" language-shell"><code class="language-shell">$ mkdir -p /mydata/redis/conf$ touch /mydata/redis/conf/redis.conf# 启动docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data \-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf \-d redis redis-server /etc/redis/redis.conf</code></pre><h3 id="2-客户端连接Redis"><a href="#2-客户端连接Redis" class="headerlink" title="2. 客户端连接Redis"></a>2. 客户端连接Redis</h3><pre class=" language-shell"><code class="language-shell"># 连接（交互模式）docker exec -it redis redis-cli# 退出exit</code></pre><h3 id="3-配置-redis-conf-redis-conf-文件"><a href="#3-配置-redis-conf-redis-conf-文件" class="headerlink" title="3.配置 redis/conf/redis.conf 文件"></a>3.配置 <code>redis/conf/redis.conf</code> 文件</h3><pre class=" language-shell"><code class="language-shell"># 启用Redis持久化appendonly yes</code></pre><h3 id="4-重启Redis"><a href="#4-重启Redis" class="headerlink" title="4.重启Redis"></a>4.重启Redis</h3><pre class=" language-shell"><code class="language-shell"># 查看Docker正在运行的容器$ sudo docker ps# 重启$ sudo docker restart redis# 设置自动启动$ sudo docker update redis --restart=always</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 基本指令</title>
      <link href="2020/06/01/linux/linux-zhong-de-ji-ben-zhi-ling/"/>
      <url>2020/06/01/linux/linux-zhong-de-ji-ben-zhi-ling/</url>
      
        <content type="html"><![CDATA[<h2 id="1-了解Linux"><a href="#1-了解Linux" class="headerlink" title="1. 了解Linux"></a>1. 了解Linux</h2><ol><li><strong>Kernel</strong>：可以直接驱动硬件</li><li><strong>Shell</strong>：翻译     </li><li><strong>交换空间</strong>：虚拟内存<ul><li><strong>CPU</strong>：程序必须在CPU中运行</li><li><strong>硬盘</strong>：</li><li><strong>精灵程序/守护程序</strong>：伴随操作系统的开启而开启，伴随操作系统的关闭而关闭</li><li>进入超级管理员身份 <code># sudo passwd</code></li><li>普通用户 <code>$</code></li></ul></li><li><code>Linux</code> 没有盘符概念<ul><li>顶层文件夹 <code>/</code> : 目录 根目录 凡是在跟目录下构建的都是子目录</li><li>路径：<ul><li>相对路径： 以当前路径开头，相对点会改变    <code>./ Desktop</code></li><li>绝对路径： 以根目录 / 开头的路径，相对点不会发生改变。根据自己目前的位置去确定     <code>/home/briup/Desktop</code></li></ul></li></ul></li><li><code>/</code> 有两个含义<ol><li> 如果 <code>/</code> 位于<strong>开头</strong>代表<strong>绝对路径中的根目录</strong></li><li> 如果 <code>/</code> 没有位于第一个位置这时/ 指的是<strong>两个路径之间的间隔</strong></li></ol></li><li><code>dev</code> 设备</li><li><code>adm</code> 管理员<ul><li><code>/opt</code> 第三方软件</li><li><code>/etc</code> 系统配置</li><li><code>/dev</code> 计算机设备文件</li><li><code>/var</code> 针对管理员使用的东西（存放可变信息）</li><li><code>/kernel</code> 内核程序</li><li><code>/home</code> （export）用户专有的东西</li></ul></li></ol><h2 id="2-shell命令的构成"><a href="#2-shell命令的构成" class="headerlink" title="2. shell命令的构成"></a>2. shell命令的构成</h2><ol><li><p>清屏 <code>clear</code></p></li><li><p>以绝对路径的形式显示当前文件夹路径（查看当前位置）<code>pwd</code></p></li><li><p>切换路径</p><pre class=" language-shell"><code class="language-shell">cd         # 切换路径（类似于windows下面的双击进入目录或者是退出一个目录）    cd 绝对路径     # 不管身在何处，直接到达指定位置    cd 相对路径     # 先确定当前位置    cd .             # 当前目录（可以省略.）    cd ..            # 返回上一级目录    cd ../..        # 返回上两级目录    cd ~            # 快速返回家目录    cd /            # 返回根目录</code></pre></li><li><p>查看文件</p><pre class=" language-shell"><code class="language-shell">ls         # 将当前或指定路径下的所有的文件+文件夹显示出来commond + options    ls -a     # 展示所有文件包括隐藏文件    ls -R     # 展示当前文件夹下的文件以及他们的子文件或文件夹    ls -t     # 按照文件创建的时间先后展示文件或文件夹（最后一次修改的时间）    # 查看文件类型        ls -l      # 长列表            # 文件类型 权限 链接号 拥有者 拥有组 文件大小        ls -F     # 用以下方式告诉我们文件类型            / # 目录文件            * # 可执行文件            none（不显示） # 文本文件            @ # 软连接        # 文件类型分类            d # 目录            - # 普通文件    file files     # 查看文件中的内容的类型（形式）</code></pre></li><li><p>文件权限</p><ol><li><p>任何一个文件或者文件夹都具有三种权限</p><ul><li><code>r</code>  读</li><li><code>w</code>  写</li><li><code>x </code>  执行</li></ul></li><li><p>权限是针对三种角色进行的</p><ul><li><p> <code>u</code>   文件拥有者</p></li><li><p> <code>g</code>    文件拥有者的同组人</p></li><li><p> <code>o</code>    其他人</p></li></ul></li><li><p>文件或者文件夹的默认权限</p><ul><li>当我们不设置权限的时候，系统会给我们构建的每一个文件或者是文件夹分配一个默认权限</li><li>系统默认给构建目录分配的权限 775<ul><li><code>u rwx</code></li><li><code>g rwx</code></li><li><code>o r-x</code></li></ul></li><li>系统给构建的文件分配的默认权限 664<ul><li><code>u rw-</code></li><li><code>g rw-</code></li><li><code>o r--</code></li></ul></li></ul></li><li><p>更改文件或者目录的权限</p><ul><li>使用<code>chmod</code>，将已经构建好的文件或者目录的权限进行修改</li><li>查看默认权限 <code>ls -l</code><ul><li> <code>chmod</code> 谁增加或者减少赋值什么权限 文件</li><li> <code>chmod u/g/a/o   +/-/=   r/w/x</code>     文件或目录</li><li><code>chmod u+x，g-r，o=w file</code><ul><li><code>one rwx rwx r-x</code></li><li>使用数字代替一组权限<ul><li><code>r 4，w 2，x 1</code></li><li><code>chmod 777 two</code></li></ul></li></ul></li></ul></li><li>通过修改配置文件的方法将系统默认分配给目录或者文件的权限进行修改</li></ul></li></ol></li><li><p>新建文件 <code>touch</code></p><ul><li>当所在目录中没有文件时touch代表的快速构建新文件</li><li>当touch后面的文件存在的情况下更新文件的最后一次修改时间</li><li><code>touch a.txt</code></li></ul></li><li><p>构建目录 <code>mkdir</code></p><ul><li>在指定位置构建目录,既可以跟绝对路径,也可以跟相对路径</li><li>需求：在已经存在的文件夹下面构建新的文件夹<ul><li>希望在桌面上构建一个test目录<ul><li><code>mkdir /home/briup/Desktop/test</code></li><li><code>mkdir ~/Desktop/test</code></li></ul></li></ul></li><li>直接构建不出来，使用<code>options -p</code> 将前面不存在的目录构建出来<ul><li><code>mkdir -p test/test1/test2/test3</code></li></ul></li></ul></li><li><p>复制文件或目录到指定的位置 <code>cp</code></p><ul><li><p><code>cp file1 file2</code> 复制file1到当前文件夹下然后重命名为file2</p></li><li><p>one 目录存在</p><ul><li><code>cp file1 one/file1</code> 复制 file1到one目录下面并且取名file1</li></ul></li><li><p>one 目录不存在</p><ul><li> <code>cp file1 one</code>  复制file1到当前位置然后重命名为one</li><li><code> cp file one/file2</code> 复制file1到one目录下面并且取名file2</li></ul></li><li><p><code>cp file1 file2 file3 one</code>  将多个文件放置到one目录中<strong>不能把多个文件同时复制和更名</strong></p></li><li><p><code>cp -a</code> 复制文件夹到另一个文件夹</p></li><li><p><code>cp -i a.txt one</code> 提示是否覆盖原有文件（当文件被粘贴的位置中有一个同名文件时，默认是覆盖</p><p> <code>y</code> 覆盖 <code>n</code> 结束</p></li><li><p><code>cp -r</code> 复制目录</p></li><li><p><code>more</code> 查看</p></li></ul></li><li><p>剪切  粘贴  <code>mv</code></p><ul><li>重命名      <code>mv file1 file2</code></li><li>移动文件到目录中<ul><li><code>mv file1 one</code></li><li><code>mv file1 one/file1</code></li><li><code>mv file1 one/fine2</code></li><li><code>mv file1 file2 file3 one</code></li></ul></li><li>移动目录到目录中<ul><li><code>mv dir1 dir2</code></li><li><code>mv dir1 dir2 dir3</code></li></ul></li></ul></li><li><p><code>rm/rmdir</code></p><ul><li>删除文件或者目录<ul><li><code>rm</code> 可删除多个文件</li><li><code>rm -i</code> 删除前给提示</li></ul></li><li>删除目录<ul><li><code>rmdir</code>  只能删除空目录</li><li><code>rm -r </code>  可以删除所有目录（空或非空）</li><li><code>rm -ri</code>  删除目录，删除前提示</li></ul></li></ul></li><li><p><code>man commond</code>   查看某个命令的详细信息</p><ul><li><code>q</code>     退出帮助文档</li><li><code>f</code>    往下翻一页</li><li><code>b</code>    往上翻一页</li><li>/字符串         快速搜索          num 查找第几个<ul><li>man ls</li><li>man cd</li><li>man mv</li></ul></li></ul></li><li><p><code>ping</code>    测试两台计算机之间网络是否连通</p></li><li><p>查询计算机接入网络后的ip</p><ul><li>Linux  Mac  unix 系统下：<code>ifconfig</code></li><li>windows 系统下：<code>ipconfig</code></li></ul></li><li><p><code>data</code>  查看当前日期时间</p></li><li><p><code>cal</code> 查看当前系统默认时间所在月份的日历</p></li><li><p><code>cat file1 [file2]</code>：将一个或者多个文件中的内容一次性全部展示出来（展示是内容）</p></li><li><p><code>more file1 [file2]</code> ：查看多个文件中的内容，但是一次只能展示一页（分屏显示）</p><ul><li><code>b</code>    回退一页</li><li><code>f</code>   前进一页</li><li><code>q</code>   结束查看</li></ul></li><li><p>Linux 任务管理器 <code>htop</code></p></li><li><p>需求：快速清空一个文件 <code>/dev/null</code> （黑洞文件）</p><ul><li>空文件 <code>cat /dev/null &gt; a.txt</code></li></ul></li></ol><h2 id="3-元字符"><a href="#3-元字符" class="headerlink" title="3. 元字符"></a>3. 元字符</h2><ul><li><strong>在我们Linux中具有特殊含义的字符我们一般称为元字符</strong></li></ul><ol><li><p><code>*</code>    匹配 0 到多个任意字符</p><ul><li><code>ls *Test</code> 查看后缀为 Test 的所有的内容</li></ul></li><li><p><code>?</code>   匹配任意一个字符（一般在固定字符长度的情况下使用，指定字符数量）</p></li><li><p><code>;</code>   一行中多个命令的分隔，相当于回车</p><ul><li><code>clear;ls;pwd</code> 先执行 clear ，然后执行 ls ，最后执行 pwd</li></ul></li><li><p><code>|</code>   （管道）把上一个命令的结果当做下一个命令的输入</p></li><li><p><code>&gt;</code>   将前面命令原本输出在 <code>shell</code> 终端界面上的结果重新定向到指定的文件中，但是每一次执行的都是【覆盖】操作</p></li><li><p><code>&gt;&gt;</code>   将原本展示在 <code>shell</code> 终端中的命令执行的结果【追加】到某一个文件中</p><ul><li><code>ls &gt;&gt; a.txt</code> 将 ls 命令中的结果追加到 a.txt 中</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux指令 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
